"""AER to MER x2

Revision ID: 9625b1bd89e3
Revises: 08901b7bc357
Create Date: 2024-07-19 12:12:51.592927

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '9625b1bd89e3'
down_revision = '08901b7bc357'
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('core_eia__codes_fuel_types_mer',
    sa.Column('code', sa.Text(), nullable=False, comment='Originally reported short code.'),
    sa.Column('description', sa.Text(), nullable=True, comment='Long human-readable description of the meaning of a code/label.'),
    sa.PrimaryKeyConstraint('code', name=op.f('pk_core_eia__codes_fuel_types_mer'))
    )
    op.drop_table('core_eia__codes_fuel_types_aer')
    with op.batch_alter_table('core_eia923__monthly_generation_fuel', schema=None) as batch_op:
        batch_op.drop_constraint('fk_core_eia923__monthly_generation_fuel_fuel_type_code_mer_core_eia__codes_fuel_types_aer', type_='foreignkey')
        batch_op.create_foreign_key(batch_op.f('fk_core_eia923__monthly_generation_fuel_fuel_type_code_mer_core_eia__codes_fuel_types_mer'), 'core_eia__codes_fuel_types_mer', ['fuel_type_code_mer'], ['code'])

    with op.batch_alter_table('core_eia923__monthly_generation_fuel_nuclear', schema=None) as batch_op:
        batch_op.drop_constraint('fk_core_eia923__monthly_generation_fuel_nuclear_fuel_type_code_mer_core_eia__codes_fuel_types_aer', type_='foreignkey')
        batch_op.create_foreign_key(batch_op.f('fk_core_eia923__monthly_generation_fuel_nuclear_fuel_type_code_mer_core_eia__codes_fuel_types_mer'), 'core_eia__codes_fuel_types_mer', ['fuel_type_code_mer'], ['code'])

    with op.batch_alter_table('out_eia923__generation_fuel_combined', schema=None) as batch_op:
        batch_op.drop_constraint('fk_out_eia923__generation_fuel_combined_fuel_type_code_mer_core_eia__codes_fuel_types_aer', type_='foreignkey')
        batch_op.create_foreign_key(batch_op.f('fk_out_eia923__generation_fuel_combined_fuel_type_code_mer_core_eia__codes_fuel_types_mer'), 'core_eia__codes_fuel_types_mer', ['fuel_type_code_mer'], ['code'])

    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('out_eia923__generation_fuel_combined', schema=None) as batch_op:
        batch_op.drop_constraint(batch_op.f('fk_out_eia923__generation_fuel_combined_fuel_type_code_mer_core_eia__codes_fuel_types_mer'), type_='foreignkey')
        batch_op.create_foreign_key('fk_out_eia923__generation_fuel_combined_fuel_type_code_mer_core_eia__codes_fuel_types_aer', 'core_eia__codes_fuel_types_aer', ['fuel_type_code_mer'], ['code'])

    with op.batch_alter_table('core_eia923__monthly_generation_fuel_nuclear', schema=None) as batch_op:
        batch_op.drop_constraint(batch_op.f('fk_core_eia923__monthly_generation_fuel_nuclear_fuel_type_code_mer_core_eia__codes_fuel_types_mer'), type_='foreignkey')
        batch_op.create_foreign_key('fk_core_eia923__monthly_generation_fuel_nuclear_fuel_type_code_mer_core_eia__codes_fuel_types_aer', 'core_eia__codes_fuel_types_aer', ['fuel_type_code_mer'], ['code'])

    with op.batch_alter_table('core_eia923__monthly_generation_fuel', schema=None) as batch_op:
        batch_op.drop_constraint(batch_op.f('fk_core_eia923__monthly_generation_fuel_fuel_type_code_mer_core_eia__codes_fuel_types_mer'), type_='foreignkey')
        batch_op.create_foreign_key('fk_core_eia923__monthly_generation_fuel_fuel_type_code_mer_core_eia__codes_fuel_types_aer', 'core_eia__codes_fuel_types_aer', ['fuel_type_code_mer'], ['code'])

    op.create_table('core_eia__codes_fuel_types_aer',
    sa.Column('code', sa.TEXT(), nullable=False),
    sa.Column('description', sa.TEXT(), nullable=True),
    sa.PrimaryKeyConstraint('code', name='pk_core_eia__codes_fuel_types_aer')
    )
    op.drop_table('core_eia__codes_fuel_types_mer')
    # ### end Alembic commands ###
