"""Add PHMSA operator table to DB

Revision ID: b94538688700
Revises: 2be9c446753f
Create Date: 2025-04-16 12:01:57.222760

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = 'b94538688700'
down_revision = '2be9c446753f'
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('core_phmsagas__yearly_distribution_operators',
    sa.Column('report_date', sa.Date(), nullable=True, comment='Date reported.'),
    sa.Column('report_number', sa.Integer(), nullable=False, comment='Report number.'),
    sa.Column('report_submission_type', sa.Enum('Initial', 'Supplemental'), nullable=True, comment='Type of report submitted, either Initial or Supplemental.'),
    sa.Column('report_year', sa.Integer(), nullable=True, comment='Four-digit year in which the data was reported.'),
    sa.Column('operator_id_phmsa', sa.Integer(), nullable=True, comment='PHMSA unique operator ID.'),
    sa.Column('operator_name_phmsa', sa.Text(), nullable=True, comment='PHMSA operator name.'),
    sa.Column('office_street_address', sa.Text(), nullable=True, comment="Street address of an operator's office."),
    sa.Column('office_city', sa.Text(), nullable=True, comment="City where an operator's office is located."),
    sa.Column('office_county', sa.Text(), nullable=True, comment="County where an operator's office is located."),
    sa.Column('office_zip', sa.Text(), nullable=True, comment="Zipcode where an operator's office is located."),
    sa.Column('office_state', sa.Text(), nullable=True, comment="State where an operator's office is located."),
    sa.Column('headquarters_street_address', sa.Text(), nullable=True, comment="Street address for an operator's headquarters."),
    sa.Column('headquarters_city', sa.Text(), nullable=True, comment="City where an operator's headquarters are located."),
    sa.Column('headquarters_county', sa.Text(), nullable=True, comment="County where an operator's headquarters are located."),
    sa.Column('headquarters_state', sa.Text(), nullable=True, comment="State where an operator's headquarters are located."),
    sa.Column('headquarters_zip', sa.Text(), nullable=True, comment="Zipcode where an operator's headquarters are located."),
    sa.Column('excavation_damage_excavation_practices', sa.Integer(), nullable=True, comment='Number of incidents in which damages resulted from failure to maintain marks; or failure to support exposed facilities; or failure to use hand tools where required; or failure to test-hole (pot-hole); or improper backfilling practices; or failure to maintain clearance; or other insufficient excavation practices.'),
    sa.Column('excavation_damage_locating_practices', sa.Integer(), nullable=True, comment='Number of incidents in which damages resulted from facility could not be found or located; or facility marking or location not sufficient; or facility was not located or marked; or incorrect facility records/maps.'),
    sa.Column('excavation_damage_one_call_notification', sa.Integer(), nullable=True, comment='Number of incidents in which damages resulted from no notification made to the One-Call Center; or notification to one-call center made, but not sufficient; or wrong information provided to One Call Center'),
    sa.Column('excavation_damage_other', sa.Integer(), nullable=True, comment='Number of incidents in which damages resulted from from One-Call Center error; or abandoned facility; or deteriorated facility; or previous damage or data not collected; or other.'),
    sa.Column('excavation_damage_total', sa.Integer(), nullable=True, comment='Total number of incidents resulting in damage resulting from any cause.'),
    sa.Column('excavation_tickets', sa.Integer(), nullable=True, comment='Number of Excavation Tickets received by the operator during the year, (i.e., receipt of information by the operator from the notification center).'),
    sa.Column('services_efv_in_system', sa.Integer(), nullable=True, comment='Estimated number of services with Excess Flow Valve in the system at end of reported year related to natural gas distribution.'),
    sa.Column('services_efv_installed', sa.Integer(), nullable=True, comment='Total number of services with Excess Flow Valve installed during reported year related to natural gas distribution.'),
    sa.Column('services_shutoff_valve_in_system', sa.Integer(), nullable=True, comment='Estimated number of services with manual service line shut-off valves installed in the system at end of report year related to natural gas distribution.'),
    sa.Column('services_shutoff_valve_installed', sa.Integer(), nullable=True, comment='Total number of manual service line shut-off valves installed during reported year related to natural gas distribution.'),
    sa.Column('federal_land_leaks_repaired_or_scheduled', sa.Integer(), nullable=True, comment='Total number of leaks repaired, eliminated, or scheduled for repair on federal land during the reporting year.'),
    sa.Column('percent_unaccounted_for_gas', sa.Float(), nullable=True, comment='Unaccounted for gas as a percent of total consumption for the 12 months ending June 30 of the reporting year. Percentage is calculated as follows: Take the sum of: purchased gas + produced gas minus customer use + company use + appropriate adjustments. Then divide by the sum of customer use + company use + appropriate adjustments. Multiply the output by 100.'),
    sa.Column('additional_information', sa.Text(), nullable=True, comment='Any additional information which will assist in clarifying or classifying the reported data.'),
    sa.Column('preparer_email', sa.Text(), nullable=True, comment='Email address of representative who filed report.'),
    sa.Column('preparer_fax', sa.Text(), nullable=True, comment='Fax number of representative who filed report.'),
    sa.Column('preparer_name', sa.Text(), nullable=True, comment='Name of representative who filed report.'),
    sa.Column('preparer_phone', sa.Text(), nullable=True, comment='Phone number of representative who filed report.'),
    sa.Column('preparer_title', sa.Text(), nullable=True, comment='Title of representative who filed report.'),
    sa.PrimaryKeyConstraint('report_number', name=op.f('pk_core_phmsagas__yearly_distribution_operators'))
    )
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_table('core_phmsagas__yearly_distribution_operators')
    # ### end Alembic commands ###
