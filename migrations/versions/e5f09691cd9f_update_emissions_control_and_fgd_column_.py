"""Update Emissions control and FGD column names

Revision ID: e5f09691cd9f
Revises: 2c1f7c22ccf8
Create Date: 2026-01-06 13:49:44.268627

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = 'e5f09691cd9f'
down_revision = '2c1f7c22ccf8'
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('_core_eia923__yearly_emissions_control', schema=None) as batch_op:
        batch_op.add_column(sa.Column('acid_gas_removal_efficiency_pct', sa.Float(), nullable=True, comment='Percent removal efficiency for acid gas emissions'))
        batch_op.add_column(sa.Column('mercury_removal_efficiency_pct', sa.Float(), nullable=True, comment='Percent removal efficiency for mercury emissions rounded to nearest 0.1 percent of weight'))
        batch_op.add_column(sa.Column('particulate_removal_efficiency_tested_pct', sa.Float(), nullable=True, comment='The tested efficiency for the removal of particulate matter at 100 percent load. If not tested at 100 percent load, then the load at which the test was conducted is included as a comment on Schedule 9. If no test was conducted, the test date and tested efficiency field should be blank.'))
        batch_op.add_column(sa.Column('particulate_removal_efficiency_annual_pct', sa.Float(), nullable=True, comment='Particulate removal efficiency, based on the annual operating factor, which is defined as annual fuel consumption (MMBtu) divided by the product of the boiler design firing rate (MMBtu per hour) and hours of operation per year.When actual data are not available, estimates are provided based on equipment design performance specifications.'))
        batch_op.add_column(sa.Column('so2_removal_efficiency_tested_pct', sa.Float(), nullable=True, comment='The tested efficiency for the removal of sulfur dioxide at 100 percent load. If not tested at 100 percent load, then the load at which the test was conducted is included as a comment on Schedule 9. If no test was conducted, the test date and tested efficiency field should be blank.'))
        batch_op.add_column(sa.Column('so2_removal_efficiency_annual_pct', sa.Float(), nullable=True, comment='Sulfur dioxide removal efficiency, based on the annual operating factor, which is defined as annual fuel consumption (MMBtu) divided by the product of the boiler design firing rate (MMBtu per hour) and hours of operation per year.When actual data are not available, estimates are provided based on equipment design performance specifications.'))
        batch_op.drop_column('mercury_removal_efficiency')
        batch_op.drop_column('acid_gas_removal_efficiency')
        batch_op.drop_column('particulate_removal_efficiency_tested')
        batch_op.drop_column('so2_removal_efficiency_tested')
        batch_op.drop_column('so2_removal_efficiency_annual')
        batch_op.drop_column('particulate_removal_efficiency_annual')

    with op.batch_alter_table('_core_eia923__yearly_fgd_operation_maintenance', schema=None) as batch_op:
        batch_op.add_column(sa.Column('so2_removal_efficiency_tested_pct', sa.Float(), nullable=True, comment='The tested efficiency for the removal of sulfur dioxide at 100 percent load. If not tested at 100 percent load, then the load at which the test was conducted is included as a comment on Schedule 9. If no test was conducted, the test date and tested efficiency field should be blank.'))
        batch_op.add_column(sa.Column('so2_removal_efficiency_annual_pct', sa.Float(), nullable=True, comment='Sulfur dioxide removal efficiency, based on the annual operating factor, which is defined as annual fuel consumption (MMBtu) divided by the product of the boiler design firing rate (MMBtu per hour) and hours of operation per year.When actual data are not available, estimates are provided based on equipment design performance specifications.'))
        batch_op.drop_column('so2_removal_efficiency_tested')
        batch_op.drop_column('so2_removal_efficiency_annual')

    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('_core_eia923__yearly_fgd_operation_maintenance', schema=None) as batch_op:
        batch_op.add_column(sa.Column('so2_removal_efficiency_annual', sa.FLOAT(), nullable=True))
        batch_op.add_column(sa.Column('so2_removal_efficiency_tested', sa.FLOAT(), nullable=True))
        batch_op.drop_column('so2_removal_efficiency_annual_pct')
        batch_op.drop_column('so2_removal_efficiency_tested_pct')

    with op.batch_alter_table('_core_eia923__yearly_emissions_control', schema=None) as batch_op:
        batch_op.add_column(sa.Column('particulate_removal_efficiency_annual', sa.FLOAT(), nullable=True))
        batch_op.add_column(sa.Column('so2_removal_efficiency_annual', sa.FLOAT(), nullable=True))
        batch_op.add_column(sa.Column('so2_removal_efficiency_tested', sa.FLOAT(), nullable=True))
        batch_op.add_column(sa.Column('particulate_removal_efficiency_tested', sa.FLOAT(), nullable=True))
        batch_op.add_column(sa.Column('acid_gas_removal_efficiency', sa.FLOAT(), nullable=True))
        batch_op.add_column(sa.Column('mercury_removal_efficiency', sa.FLOAT(), nullable=True))
        batch_op.drop_column('so2_removal_efficiency_annual_pct')
        batch_op.drop_column('so2_removal_efficiency_tested_pct')
        batch_op.drop_column('particulate_removal_efficiency_annual_pct')
        batch_op.drop_column('particulate_removal_efficiency_tested_pct')
        batch_op.drop_column('mercury_removal_efficiency_pct')
        batch_op.drop_column('acid_gas_removal_efficiency_pct')

    # ### end Alembic commands ###
