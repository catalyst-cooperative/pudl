"""add core_ferc1__yearly_transmission_lines_sched422

Revision ID: f11b06e302fb
Revises: 91b851ca4e39
Create Date: 2026-01-07 19:41:31.634541

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = 'f11b06e302fb'
down_revision = '91b851ca4e39'
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('core_ferc1__yearly_transmission_lines_sched422', schema=None) as batch_op:
        batch_op.add_column(sa.Column('supporting_structure_material', sa.Text(), nullable=True, comment='Material used in the supporting structure for the transmission line. Categorized values: steel, wood, concrete.'))
        batch_op.add_column(sa.Column('supporting_structure_type_original', sa.Text(), nullable=True, comment='Original unstructured value for the supporting structure type from the source data. This column preserves the raw value for user interpretation when the categorized columns are ambiguous or contain multiple structure types/materials.'))
        batch_op.alter_column('supporting_structure_type',
               existing_type=sa.TEXT(),
               type_=sa.Enum('pole', 'h_frame', 'tower', 'underground', 'na_category'),
               existing_nullable=True)
        batch_op.alter_column('supporting_structure_material',
               existing_type=sa.TEXT(),
               type_=sa.Enum('steel', 'wood', 'concrete', 'na_category'),
               existing_nullable=True)

    with op.batch_alter_table('out_ferc1__yearly_transmission_lines_sched422', schema=None) as batch_op:
        batch_op.add_column(sa.Column('supporting_structure_material', sa.Text(), nullable=True, comment='Material used in the supporting structure for the transmission line. Categorized values: steel, wood, concrete.'))
        batch_op.add_column(sa.Column('supporting_structure_type_original', sa.Text(), nullable=True, comment='Original unstructured value for the supporting structure type from the source data. This column preserves the raw value for user interpretation when the categorized columns are ambiguous or contain multiple structure types/materials.'))
        batch_op.alter_column('supporting_structure_type',
               existing_type=sa.TEXT(),
               type_=sa.Enum('pole', 'h_frame', 'tower', 'underground', 'na_category'),
               existing_nullable=True)
        batch_op.alter_column('supporting_structure_material',
               existing_type=sa.TEXT(),
               type_=sa.Enum('steel', 'wood', 'concrete', 'na_category'),
               existing_nullable=True)

    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('out_ferc1__yearly_transmission_lines_sched422', schema=None) as batch_op:
        batch_op.alter_column('supporting_structure_material',
               existing_type=sa.Enum('steel', 'wood', 'concrete', 'na_category'),
               type_=sa.TEXT(),
               existing_nullable=True)
        batch_op.alter_column('supporting_structure_type',
               existing_type=sa.Enum('pole', 'h_frame', 'tower', 'underground', 'na_category'),
               type_=sa.TEXT(),
               existing_nullable=True)
        batch_op.drop_column('supporting_structure_type_original')

    with op.batch_alter_table('core_ferc1__yearly_transmission_lines_sched422', schema=None) as batch_op:
        batch_op.alter_column('supporting_structure_material',
               existing_type=sa.Enum('steel', 'wood', 'concrete', 'na_category'),
               type_=sa.TEXT(),
               existing_nullable=True)
        batch_op.alter_column('supporting_structure_type',
               existing_type=sa.Enum('pole', 'h_frame', 'tower', 'underground', 'na_category'),
               type_=sa.TEXT(),
               existing_nullable=True)
        batch_op.drop_column('supporting_structure_type_original')

    # ### end Alembic commands ###
