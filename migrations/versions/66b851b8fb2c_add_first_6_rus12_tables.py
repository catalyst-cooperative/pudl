"""Add first 6 rus12 tables

Revision ID: 66b851b8fb2c
Revises: 9c66ca6fcafa
Create Date: 2026-02-04 13:32:25.892553

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '66b851b8fb2c'
down_revision = '9c66ca6fcafa'
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('core_rus12__scd_borrowers',
    sa.Column('report_date', sa.Date(), nullable=False, comment='Date reported.'),
    sa.Column('borrower_id_rus', sa.Text(), nullable=False, comment="Unique identifier of RUS (Rural Utilities Service) borrower. These ID's are structured as: two character state acronyms followed by four digits."),
    sa.Column('borrower_name_rus', sa.Text(), nullable=True, comment='The name of the RUS (Rural Utilities Service) borrower.'),
    sa.Column('state', sa.Text(), nullable=True, comment='Two letter US state abbreviation.'),
    sa.PrimaryKeyConstraint('report_date', 'borrower_id_rus', name=op.f('pk_core_rus12__scd_borrowers'))
    )
    op.create_table('core_rus12__yearly_balance_sheet_assets',
    sa.Column('report_date', sa.Date(), nullable=False, comment='Date reported.'),
    sa.Column('borrower_id_rus', sa.Text(), nullable=False, comment="Unique identifier of RUS (Rural Utilities Service) borrower. These ID's are structured as: two character state acronyms followed by four digits."),
    sa.Column('borrower_name_rus', sa.Text(), nullable=True, comment='The name of the RUS (Rural Utilities Service) borrower.'),
    sa.Column('asset_type', sa.Enum('utility_plant_in_service', 'construction_work_in_progress', 'total_utility_plant', 'depreciation_and_amortization', 'net_utility_plant', 'non_utility_property_asset', 'investments_subsidiary_companies', 'investments_associated_orgs_patronage_capital', 'investments_associated_orgs_other_general_funds', 'investments_associated_orgs_other_non_general_funds', 'investments_economic_development', 'investments_other', 'special_funds', 'total_other_property_and_investments', 'cash_general_funds', 'cash_construction_funds_trustee', 'special_deposits', 'investments_temporary', 'notes_receivable', 'accounts_receivable_sales_of_energy', 'accounts_receivable_other', 'fuel_stock', 'renewable_energy_credits', 'materials_and_supplies', 'prepayments', 'other_current_and_accrued', 'total_current_and_accrued', 'unamortized_debt_discount_property_losses', 'regulatory', 'other_deferred_debits', 'accumulated_deferred_income_taxes_debits', 'total'), nullable=False, comment='Type of asset being reported to the core_rus12__yearly_balance_sheet_assets table.'),
    sa.Column('balance', sa.Text(), nullable=True, comment='Indication of whether a column is a credit or debit, as reported in the XBRL taxonomy.'),
    sa.Column('is_total', sa.Boolean(), nullable=True, comment='Whether or not this record represents a total.'),
    sa.PrimaryKeyConstraint('report_date', 'borrower_id_rus', 'asset_type', name=op.f('pk_core_rus12__yearly_balance_sheet_assets'))
    )
    op.create_table('core_rus12__yearly_balance_sheet_liabilities',
    sa.Column('report_date', sa.Date(), nullable=False, comment='Date reported.'),
    sa.Column('borrower_id_rus', sa.Text(), nullable=False, comment="Unique identifier of RUS (Rural Utilities Service) borrower. These ID's are structured as: two character state acronyms followed by four digits."),
    sa.Column('borrower_name_rus', sa.Text(), nullable=True, comment='The name of the RUS (Rural Utilities Service) borrower.'),
    sa.Column('liability_type', sa.Enum('memberships', 'assigned_and_assignable_patronage_capital', 'retired_this_year_patronage_capital', 'retired_prior_years_patronage_capital', 'patronage_capital', 'operating_margins_prior_years', 'operating_margins_current_year', 'non_operating_margins', 'other_margins_and_equities', 'total_margins_and_equities', 'long_term_debt_rus', 'payments_unapplied', 'long_term_debt_rus_economic_development', 'long_term_debt_ffb_rus_guaranteed', 'long_term_debt_other_rus_guaranteed', 'long_term_debt_other', 'total_long_term_debt', 'noncurrent_obligations_under_capital_leases', 'accumulated_operating_provisions', 'total_other_noncurrent_liabilities', 'notes_payable', 'accounts_payable', 'current_maturities_long_term_debt', 'rural_development', 'current_maturities_capital_leases', 'taxes_accrued', 'interest_accrued', 'other_current_and_accrued', 'total_current_and_accrued', 'deferred_credits', 'accumulated_deferred_income_taxes_credits', 'total_liabilities_and_other_credits'), nullable=False, comment='Type of liability being reported to the core_rus12__yearly_balance_sheet_liabilities table.'),
    sa.Column('balance', sa.Text(), nullable=True, comment='Indication of whether a column is a credit or debit, as reported in the XBRL taxonomy.'),
    sa.Column('is_total', sa.Boolean(), nullable=True, comment='Whether or not this record represents a total.'),
    sa.PrimaryKeyConstraint('report_date', 'borrower_id_rus', 'liability_type', name=op.f('pk_core_rus12__yearly_balance_sheet_liabilities'))
    )
    op.create_table('core_rus12__yearly_lines_stations_labor_materials_cost',
    sa.Column('report_date', sa.Date(), nullable=False, comment='Date reported.'),
    sa.Column('borrower_id_rus', sa.Text(), nullable=False, comment="Unique identifier of RUS (Rural Utilities Service) borrower. These ID's are structured as: two character state acronyms followed by four digits."),
    sa.Column('borrower_name_rus', sa.Text(), nullable=True, comment='The name of the RUS (Rural Utilities Service) borrower.'),
    sa.Column('labor_or_material', sa.Enum('labor', 'material'), nullable=False, comment='Indicates whether the cost reported is for labor or material.'),
    sa.Column('operation_or_maintenance', sa.Enum('operation', 'maintenance'), nullable=False, comment='Indicates whether the expenditure is for operation or maintenance.'),
    sa.Column('lines_or_stations', sa.Enum('lines', 'stations'), nullable=False, comment='Indicates whether the cost reported pertains to  lines or stations.'),
    sa.Column('cost', sa.Float(), nullable=True, comment='Cost value.'),
    sa.PrimaryKeyConstraint('report_date', 'borrower_id_rus', 'labor_or_material', 'operation_or_maintenance', 'lines_or_stations', name=op.f('pk_core_rus12__yearly_lines_stations_labor_materials_cost'))
    )
    op.create_table('core_rus12__yearly_long_term_debt',
    sa.Column('report_date', sa.Date(), nullable=True, comment='Date reported.'),
    sa.Column('borrower_id_rus', sa.Text(), nullable=True, comment="Unique identifier of RUS (Rural Utilities Service) borrower. These ID's are structured as: two character state acronyms followed by four digits."),
    sa.Column('borrower_name_rus', sa.Text(), nullable=True, comment='The name of the RUS (Rural Utilities Service) borrower.'),
    sa.Column('debt_description', sa.Text(), nullable=True, comment='Description of debt or loan. On the original form, there are nine provided descriptions and a section to add other free-form descriptions.'),
    sa.Column('debt_ending_balance', sa.Float(), nullable=True, comment='The amount of principal still owned on the debt at the end of the report year.'),
    sa.Column('debt_interest', sa.Float(), nullable=True, comment='The interest expense on the debt for the report year.'),
    sa.Column('debt_principal', sa.Float(), nullable=True, comment='The principal paid on the debt during the report year.'),
    sa.Column('debt_total', sa.Float(), nullable=True, comment='The total amount of debt.')
    )
    op.create_table('core_rus12__yearly_meeting_and_board',
    sa.Column('report_date', sa.Date(), nullable=False, comment='Date reported.'),
    sa.Column('borrower_id_rus', sa.Text(), nullable=False, comment="Unique identifier of RUS (Rural Utilities Service) borrower. These ID's are structured as: two character state acronyms followed by four digits."),
    sa.Column('borrower_name_rus', sa.Text(), nullable=True, comment='The name of the RUS (Rural Utilities Service) borrower.'),
    sa.Column('last_annual_meeting_date', sa.Text(), nullable=True, comment='The date of the last annual meeting.'),
    sa.Column('members_num', sa.Integer(), nullable=True, comment='The total number of members.'),
    sa.Column('members_present_at_meeting_num', sa.Integer(), nullable=True, comment='The number of members present at the last annual meeting.'),
    sa.Column('was_quorum_present', sa.Boolean(), nullable=True, comment='Whether or not quorum was met.'),
    sa.Column('members_voting_by_proxy_or_mail_num', sa.Integer(), nullable=True, comment='The number of members voting by mail or by proxy.'),
    sa.Column('board_members_num', sa.Integer(), nullable=True, comment='The total number of board members.'),
    sa.Column('fees_and_expenses_for_board_members', sa.Integer(), nullable=True, comment='The total amount of fees and expenses for board members.'),
    sa.Column('does_manager_have_written_contract', sa.Boolean(), nullable=True, comment="Whether or not the RUS borrower's manager has a written contract."),
    sa.PrimaryKeyConstraint('report_date', 'borrower_id_rus', name=op.f('pk_core_rus12__yearly_meeting_and_board'))
    )
    op.create_table('core_rus12__yearly_renewable_plants',
    sa.Column('report_date', sa.Date(), nullable=False, comment='Date reported.'),
    sa.Column('borrower_id_rus', sa.Text(), nullable=False, comment="Unique identifier of RUS (Rural Utilities Service) borrower. These ID's are structured as: two character state acronyms followed by four digits."),
    sa.Column('borrower_name_rus', sa.Text(), nullable=True, comment='The name of the RUS (Rural Utilities Service) borrower.'),
    sa.Column('plant_name_rus', sa.Text(), nullable=False, comment='Name of the plant as reported to RUS.'),
    sa.Column('prime_mover_id', sa.Integer(), nullable=False, comment='Unique numeric identifier for each prime mover type used by RUS borrowers.'),
    sa.Column('prime_mover_type', sa.Enum('Hydro', 'Internal Combustion', 'Large Wind', 'Steam', 'Photovoltaic'), nullable=True, comment='Type of prime mover (e.g. Hydro, Internal Combustion).'),
    sa.Column('primary_renewable_fuel_type_id', sa.Integer(), nullable=True, comment='Unique numeric identifier for each renewable fuel type.'),
    sa.Column('primary_renewable_fuel_type', sa.Enum('Hydro', 'Methane - landfill gas', 'Wind', 'Biomass - wood', 'Methane - waste', 'Hybrid', 'Solar - photvoltaic', 'Solar - thermal generation', 'Other'), nullable=True, comment='Primary renewable fuel type used by the plant.'),
    sa.Column('renewable_fuel_pct', sa.Float(), nullable=True, comment='Percentage of renewable fuel used.'),
    sa.Column('capacity_mw', sa.Float(), nullable=True, comment='Total installed (nameplate) capacity, in megawatts.'),
    sa.Column('net_generation_mwh', sa.Float(), nullable=True, comment='Net electricity generation for the specified period in megawatt-hours (MWh).'),
    sa.Column('capacity_factor', sa.Float(), nullable=True, comment='Fraction of potential generation that was actually reported for a plant part.'),
    sa.Column('employees_num', sa.Integer(), nullable=True, comment='Number of employees.'),
    sa.Column('opex_per_mwh', sa.Float(), nullable=True, comment='Total production expenses (USD per MWh generated).'),
    sa.Column('power_cost_per_mwh', sa.Float(), nullable=True, comment='The cost of power per mwh.'),
    sa.Column('invested', sa.Float(), nullable=True, comment='The amount of money invested.'),
    sa.Column('ownership_pct', sa.Float(), nullable=True, comment='Percentage of the plant owned by the respondent.'),
    sa.Column('rus_funding', sa.Float(), nullable=True, comment='Amount of funding received from the Rural Utilities Service (RUS).'),
    sa.Column('comments', sa.Text(), nullable=True, comment='General comments field.'),
    sa.PrimaryKeyConstraint('report_date', 'borrower_id_rus', 'plant_name_rus', 'prime_mover_id', name=op.f('pk_core_rus12__yearly_renewable_plants'))
    )
    with op.batch_alter_table('core_rus7__yearly_energy_efficiency', schema=None) as batch_op:
        batch_op.alter_column('invested',
               existing_type=sa.INTEGER(),
               type_=sa.Float(),
               existing_nullable=True)

    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('core_rus7__yearly_energy_efficiency', schema=None) as batch_op:
        batch_op.alter_column('invested',
               existing_type=sa.Float(),
               type_=sa.INTEGER(),
               existing_nullable=True)

    op.drop_table('core_rus12__yearly_renewable_plants')
    op.drop_table('core_rus12__yearly_meeting_and_board')
    op.drop_table('core_rus12__yearly_long_term_debt')
    op.drop_table('core_rus12__yearly_lines_stations_labor_materials_cost')
    op.drop_table('core_rus12__yearly_balance_sheet_liabilities')
    op.drop_table('core_rus12__yearly_balance_sheet_assets')
    op.drop_table('core_rus12__scd_borrowers')
    # ### end Alembic commands ###
