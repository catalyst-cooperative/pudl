<!doctype html>
<html class="no-js" lang="en" data-content_root="../../../../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EXWBBTVMWK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-EXWBBTVMWK');
    </script>
    <link rel="index" title="Index" href="../../../../genindex.html"><link rel="search" title="Search" href="../../../../search.html"><link rel="next" title="pudl.analysis.timeseries_evaluation" href="../timeseries_evaluation/index.html"><link rel="prev" title="pudl.analysis.state_demand" href="../state_demand/index.html">
        <link rel="prefetch" href="../../../../_static/catalyst_logo-200x200.png" as="image">

    <!-- Generated with Sphinx 9.1.0 and Furo 2025.12.19 -->
        <title>pudl.analysis.timeseries_cleaning - PUDL 2026.2.1.dev10 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo.css?v=7bdb33bb" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/custom.css?v=b1990d62" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  --color-announcement-background: yellow;
  --color-announcement-text: red;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-announcement-background: yellow;
  --color-announcement-text: red;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-announcement-background: yellow;
  --color-announcement-text: red;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>

<div class="announcement">
  <aside class="announcement-content">
     <b>Take our ~10 minute <a href="https://forms.gle/E9ou5fgMcR7YVRCRA">2026 Energy Data Ecosystem Survey!</b> 
  </aside>
</div>

<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../../index.html"><div class="brand">PUDL 2026.2.1.dev10 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../../index.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../../../_static/catalyst_logo-200x200.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">PUDL 2026.2.1.dev10 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../index.html">About PUDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../data_access.html">Data Access</a></li>
<li class="toctree-l1"><a class="reference external" href="https://data.catalyst.coop">PUDL Data Viewer</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../data_sources/index.html">Data Sources</a><input aria-label="Toggle navigation of Data Sources" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/censusdp1tract.html">Census DP1 – Profile of General Demographic Characteristics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/censuspep.html">Population Estimates Program's (PEP) Federal Information Processing Series (FIPS) Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/eiaapi.html">EIA Bulk API Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/eia176.html">EIA Form 176 – Annual Report of Natural and Supplemental Gas Supply and Disposition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/eia860.html">EIA Form 860 – Annual Electric Generator Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/eia861.html">EIA Form 861 – Annual Electric Power Industry Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/eia923.html">EIA Form 923 – Power Plant Operations Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/eia930.html">EIA Form 930 – Hourly and Daily Balancing Authority Operations Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/eiaaeo.html">EIA Annual Energy Outlook (AEO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/epacamd_eia.html">EPA CAMD to EIA Power Sector Data Crosswalk</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/epacems.html">EPA Hourly Continuous Emission Monitoring System (CEMS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/ferc1.html">FERC Form 1 – Annual Report of Major Electric Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/ferc714.html">FERC Form 714 – Annual Electric Balancing Authority Area and Planning Area Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/ferceqr.html">FERC Form 920 – Electric Quarterly Report (EQR)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/gridpathratoolkit.html">GridPath Resource Adequacy Toolkit Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/nrelatb.html">NREL Annual Technology Baseline (ATB) for Electricity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/phmsagas.html">Pipelines and Hazardous Materials Safety Administration (PHMSA) Annual Natural Gas Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/rus12.html">USDA RUS Form 12 – Financial and Operating Report: Electric Power Supply</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/rus7.html">USDA RUS Form 7 – Financial and Operating Report: Electric Distribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/sec10k.html">U.S. Securities and Exchange Commission (SEC) Form 10-K</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/vcerare.html">Vibrant Clean Energy Resource Adequacy Renewable Energy (RARE) Power Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/other_data.html">Other Data in PUDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_sources/future_data.html">High Priority Target Datasets</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../data_dictionaries/index.html">Data Dictionaries</a><input aria-label="Toggle navigation of Data Dictionaries" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_dictionaries/pudl_db.html">PUDL Data Dictionary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_dictionaries/ferc1_db.html">Raw FERC Form 1 Data Dictionary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_dictionaries/codes_and_labels.html">PUDL Code Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../data_dictionaries/usage_warnings.html">PUDL Usage Warnings</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../methodology/index.html">Methodology</a><input aria-label="Toggle navigation of Methodology" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../methodology/timeseries_imputation.html">Timeseries Imputation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../methodology/sec10k_modeling.html">SEC 10-K Ownership Data Extraction Modeling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../CONTRIBUTING.html">Contributing</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../dev/index.html">Development</a><input aria-label="Toggle navigation of Development" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/dev_setup.html">Development Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/run_the_etl.html">Running the ETL Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/dev_dagster.html">Developing with Dagster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/project_management.html">Project Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/testing.html">Testing PUDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/data_validation_quickstart.html">Data validation quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/data_validation_reference.html">Data validation reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/metadata.html">Metadata editing guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/build_docs.html">Building the Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/datastore.html">Working with the Datastore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/clone_ferc1.html">Converting raw FERC data to SQLite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/existing_data_updates.html">Existing Data Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/run_a_release.html">Run a Versioned Release</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/pudl_id_mapping.html">PUDL ID Mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/naming_conventions.html">Naming Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/data_guidelines.html">Data and ETL Design Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/nightly_data_builds.html">Nightly Data Builds</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/ferceqr_data_builds.html">FERC EQR Data Builds</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/infrastructure_as_code.html">Infrastructure as Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev/managing_external_contributions.html">Managing External Contributions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../LICENSE.html">Licensing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../code_of_conduct.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../release_notes.html">Release Notes</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../../index.html">API Reference</a><input aria-label="Toggle navigation of API Reference" checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="../../index.html">pudl</a><input aria-label="Toggle navigation of pudl" checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../__main__/index.html">pudl.__main__</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../_version/index.html">pudl._version</a></li>
<li class="toctree-l3 current has-children"><a class="reference internal" href="../index.html">pudl.analysis</a><input aria-label="Toggle navigation of pudl.analysis" checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../allocate_gen_fuel/index.html">pudl.analysis.allocate_gen_fuel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../fuel_by_plant/index.html">pudl.analysis.fuel_by_plant</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mcoe/index.html">pudl.analysis.mcoe</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../ml_tools/index.html">pudl.analysis.ml_tools</a><input aria-label="Toggle navigation of pudl.analysis.ml_tools" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../ml_tools/experiment_tracking/index.html">pudl.analysis.ml_tools.experiment_tracking</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ml_tools/models/index.html">pudl.analysis.ml_tools.models</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../plant_parts_eia/index.html">pudl.analysis.plant_parts_eia</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../record_linkage/index.html">pudl.analysis.record_linkage</a><input aria-label="Toggle navigation of pudl.analysis.record_linkage" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../record_linkage/classify_plants_ferc1/index.html">pudl.analysis.record_linkage.classify_plants_ferc1</a></li>
<li class="toctree-l5"><a class="reference internal" href="../record_linkage/eia_ferc1_inputs/index.html">pudl.analysis.record_linkage.eia_ferc1_inputs</a></li>
<li class="toctree-l5"><a class="reference internal" href="../record_linkage/eia_ferc1_model_config/index.html">pudl.analysis.record_linkage.eia_ferc1_model_config</a></li>
<li class="toctree-l5"><a class="reference internal" href="../record_linkage/eia_ferc1_record_linkage/index.html">pudl.analysis.record_linkage.eia_ferc1_record_linkage</a></li>
<li class="toctree-l5"><a class="reference internal" href="../record_linkage/eia_ferc1_train/index.html">pudl.analysis.record_linkage.eia_ferc1_train</a></li>
<li class="toctree-l5"><a class="reference internal" href="../record_linkage/embed_dataframe/index.html">pudl.analysis.record_linkage.embed_dataframe</a></li>
<li class="toctree-l5"><a class="reference internal" href="../record_linkage/link_cross_year/index.html">pudl.analysis.record_linkage.link_cross_year</a></li>
<li class="toctree-l5"><a class="reference internal" href="../record_linkage/name_cleaner/index.html">pudl.analysis.record_linkage.name_cleaner</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../service_territory/index.html">pudl.analysis.service_territory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../spatial/index.html">pudl.analysis.spatial</a></li>
<li class="toctree-l4"><a class="reference internal" href="../state_demand/index.html">pudl.analysis.state_demand</a></li>
<li class="toctree-l4 current current-page"><a class="current reference internal" href="#">pudl.analysis.timeseries_cleaning</a></li>
<li class="toctree-l4"><a class="reference internal" href="../timeseries_evaluation/index.html">pudl.analysis.timeseries_evaluation</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../convert/index.html">pudl.convert</a><input aria-label="Toggle navigation of pudl.convert" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../convert/censusdp1tract_to_sqlite/index.html">pudl.convert.censusdp1tract_to_sqlite</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../convert/metadata_to_rst/index.html">pudl.convert.metadata_to_rst</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dbt_wrapper/index.html">pudl.dbt_wrapper</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../etl/index.html">pudl.etl</a><input aria-label="Toggle navigation of pudl.etl" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../etl/asset_checks/index.html">pudl.etl.asset_checks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../etl/check_foreign_keys/index.html">pudl.etl.check_foreign_keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../etl/cli/index.html">pudl.etl.cli</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../etl/eia_bulk_elec_assets/index.html">pudl.etl.eia_bulk_elec_assets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../etl/ferceqr_deployment/index.html">pudl.etl.ferceqr_deployment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../etl/glue_assets/index.html">pudl.etl.glue_assets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../etl/static_assets/index.html">pudl.etl.static_assets</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../extract/index.html">pudl.extract</a><input aria-label="Toggle navigation of pudl.extract" class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../extract/censuspep/index.html">pudl.extract.censuspep</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/csv/index.html">pudl.extract.csv</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/dbf/index.html">pudl.extract.dbf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/eia176/index.html">pudl.extract.eia176</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/eia191/index.html">pudl.extract.eia191</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/eia757a/index.html">pudl.extract.eia757a</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/eia860/index.html">pudl.extract.eia860</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/eia860m/index.html">pudl.extract.eia860m</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/eia861/index.html">pudl.extract.eia861</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/eia923/index.html">pudl.extract.eia923</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/eia930/index.html">pudl.extract.eia930</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/eiaaeo/index.html">pudl.extract.eiaaeo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/eiaapi/index.html">pudl.extract.eiaapi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/epacems/index.html">pudl.extract.epacems</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/excel/index.html">pudl.extract.excel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/extractor/index.html">pudl.extract.extractor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/ferc/index.html">pudl.extract.ferc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/ferc1/index.html">pudl.extract.ferc1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/ferc2/index.html">pudl.extract.ferc2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/ferc6/index.html">pudl.extract.ferc6</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/ferc60/index.html">pudl.extract.ferc60</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/ferc714/index.html">pudl.extract.ferc714</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/ferccid/index.html">pudl.extract.ferccid</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/ferceqr/index.html">pudl.extract.ferceqr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/gridpathratoolkit/index.html">pudl.extract.gridpathratoolkit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/nrelatb/index.html">pudl.extract.nrelatb</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/parquet/index.html">pudl.extract.parquet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/phmsagas/index.html">pudl.extract.phmsagas</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/rus12/index.html">pudl.extract.rus12</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/rus7/index.html">pudl.extract.rus7</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/sec10k/index.html">pudl.extract.sec10k</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/vcerare/index.html">pudl.extract.vcerare</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../extract/xbrl/index.html">pudl.extract.xbrl</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../ferc_to_sqlite/index.html">pudl.ferc_to_sqlite</a><input aria-label="Toggle navigation of pudl.ferc_to_sqlite" class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../ferc_to_sqlite/cli/index.html">pudl.ferc_to_sqlite.cli</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../glue/index.html">pudl.glue</a><input aria-label="Toggle navigation of pudl.glue" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../glue/ferc1_eia/index.html">pudl.glue.ferc1_eia</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../glue/ferc714/index.html">pudl.glue.ferc714</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../helpers/index.html">pudl.helpers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../io_managers/index.html">pudl.io_managers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../logging_helpers/index.html">pudl.logging_helpers</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../metadata/index.html">pudl.metadata</a><input aria-label="Toggle navigation of pudl.metadata" class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../metadata/classes/index.html">pudl.metadata.classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../metadata/codes/index.html">pudl.metadata.codes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../metadata/constants/index.html">pudl.metadata.constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../metadata/descriptions/index.html">pudl.metadata.descriptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../metadata/dfs/index.html">pudl.metadata.dfs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../metadata/enums/index.html">pudl.metadata.enums</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../metadata/fields/index.html">pudl.metadata.fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../metadata/helpers/index.html">pudl.metadata.helpers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../metadata/labels/index.html">pudl.metadata.labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../metadata/resource_helpers/index.html">pudl.metadata.resource_helpers</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../metadata/resources/index.html">pudl.metadata.resources</a><input aria-label="Toggle navigation of pudl.metadata.resources" class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/allocate_gen_fuel/index.html">pudl.metadata.resources.allocate_gen_fuel</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/censusdp1tract/index.html">pudl.metadata.resources.censusdp1tract</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/eia/index.html">pudl.metadata.resources.eia</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/eia176/index.html">pudl.metadata.resources.eia176</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/eia860/index.html">pudl.metadata.resources.eia860</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/eia860m/index.html">pudl.metadata.resources.eia860m</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/eia861/index.html">pudl.metadata.resources.eia861</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/eia923/index.html">pudl.metadata.resources.eia923</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/eia930/index.html">pudl.metadata.resources.eia930</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/eiaaeo/index.html">pudl.metadata.resources.eiaaeo</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/eiaapi/index.html">pudl.metadata.resources.eiaapi</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/epacems/index.html">pudl.metadata.resources.epacems</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/ferc1/index.html">pudl.metadata.resources.ferc1</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/ferc1_eia_record_linkage/index.html">pudl.metadata.resources.ferc1_eia_record_linkage</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/ferc714/index.html">pudl.metadata.resources.ferc714</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/ferccid/index.html">pudl.metadata.resources.ferccid</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/ferceqr/index.html">pudl.metadata.resources.ferceqr</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/glue/index.html">pudl.metadata.resources.glue</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/gridpathratoolkit/index.html">pudl.metadata.resources.gridpathratoolkit</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/nrelatb/index.html">pudl.metadata.resources.nrelatb</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/phmsagas/index.html">pudl.metadata.resources.phmsagas</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/pudl/index.html">pudl.metadata.resources.pudl</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/rus12/index.html">pudl.metadata.resources.rus12</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/rus7/index.html">pudl.metadata.resources.rus7</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/sec10k/index.html">pudl.metadata.resources.sec10k</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../metadata/resources/vcerare/index.html">pudl.metadata.resources.vcerare</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../metadata/sources/index.html">pudl.metadata.sources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../metadata/warnings/index.html">pudl.metadata.warnings</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../output/index.html">pudl.output</a><input aria-label="Toggle navigation of pudl.output" class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../output/censusdp1tract/index.html">pudl.output.censusdp1tract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../output/eia/index.html">pudl.output.eia</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../output/eia860/index.html">pudl.output.eia860</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../output/eia923/index.html">pudl.output.eia923</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../output/eia930/index.html">pudl.output.eia930</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../output/eiaapi/index.html">pudl.output.eiaapi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../output/ferc1/index.html">pudl.output.ferc1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../output/ferc714/index.html">pudl.output.ferc714</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../output/sec10k/index.html">pudl.output.sec10k</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../output/sql/index.html">pudl.output.sql</a><input aria-label="Toggle navigation of pudl.output.sql" class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../output/sql/helpers/index.html">pudl.output.sql.helpers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../package_data/index.html">pudl.package_data</a><input aria-label="Toggle navigation of pudl.package_data" class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../package_data/censuspep/index.html">pudl.package_data.censuspep</a><input aria-label="Toggle navigation of pudl.package_data.censuspep" class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../package_data/censuspep/column_maps/index.html">pudl.package_data.censuspep.column_maps</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../package_data/eia176/index.html">pudl.package_data.eia176</a><input aria-label="Toggle navigation of pudl.package_data.eia176" class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../package_data/eia176/column_maps/index.html">pudl.package_data.eia176.column_maps</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../package_data/eia191/index.html">pudl.package_data.eia191</a><input aria-label="Toggle navigation of pudl.package_data.eia191" class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../package_data/eia191/column_maps/index.html">pudl.package_data.eia191.column_maps</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../package_data/eia757a/index.html">pudl.package_data.eia757a</a><input aria-label="Toggle navigation of pudl.package_data.eia757a" class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../package_data/eia757a/column_maps/index.html">pudl.package_data.eia757a.column_maps</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../package_data/eia860/index.html">pudl.package_data.eia860</a><input aria-label="Toggle navigation of pudl.package_data.eia860" class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../package_data/eia860/column_maps/index.html">pudl.package_data.eia860.column_maps</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../package_data/eia860m/index.html">pudl.package_data.eia860m</a><input aria-label="Toggle navigation of pudl.package_data.eia860m" class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../package_data/eia860m/column_maps/index.html">pudl.package_data.eia860m.column_maps</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../package_data/eia861/index.html">pudl.package_data.eia861</a><input aria-label="Toggle navigation of pudl.package_data.eia861" class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../package_data/eia861/column_maps/index.html">pudl.package_data.eia861.column_maps</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../package_data/eia923/index.html">pudl.package_data.eia923</a><input aria-label="Toggle navigation of pudl.package_data.eia923" class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../package_data/eia923/column_maps/index.html">pudl.package_data.eia923.column_maps</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../package_data/eia930/index.html">pudl.package_data.eia930</a><input aria-label="Toggle navigation of pudl.package_data.eia930" class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" role="switch" type="checkbox"/><label for="toctree-checkbox-28"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../package_data/eia930/column_maps/index.html">pudl.package_data.eia930.column_maps</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../package_data/epacems/index.html">pudl.package_data.epacems</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../package_data/ferc1/index.html">pudl.package_data.ferc1</a><input aria-label="Toggle navigation of pudl.package_data.ferc1" class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" role="switch" type="checkbox"/><label for="toctree-checkbox-29"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../package_data/ferc1/row_maps/index.html">pudl.package_data.ferc1.row_maps</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../package_data/glue/index.html">pudl.package_data.glue</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../package_data/phmsagas/index.html">pudl.package_data.phmsagas</a><input aria-label="Toggle navigation of pudl.package_data.phmsagas" class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" role="switch" type="checkbox"/><label for="toctree-checkbox-30"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../package_data/phmsagas/column_maps/index.html">pudl.package_data.phmsagas.column_maps</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../package_data/rus12/index.html">pudl.package_data.rus12</a><input aria-label="Toggle navigation of pudl.package_data.rus12" class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" role="switch" type="checkbox"/><label for="toctree-checkbox-31"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../package_data/rus12/column_maps/index.html">pudl.package_data.rus12.column_maps</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../package_data/rus7/index.html">pudl.package_data.rus7</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../package_data/settings/index.html">pudl.package_data.settings</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../package_data/test/index.html">pudl.package_data.test</a><input aria-label="Toggle navigation of pudl.package_data.test" class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" role="switch" type="checkbox"/><label for="toctree-checkbox-32"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../package_data/test/column_maps/index.html">pudl.package_data.test.column_maps</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../package_data/vcerare/index.html">pudl.package_data.vcerare</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../resources/index.html">pudl.resources</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../scripts/index.html">pudl.scripts</a><input aria-label="Toggle navigation of pudl.scripts" class="toctree-checkbox" id="toctree-checkbox-33" name="toctree-checkbox-33" role="switch" type="checkbox"/><label for="toctree-checkbox-33"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../scripts/auto_match_utilities/index.html">pudl.scripts.auto_match_utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../scripts/dbt_helper/index.html">pudl.scripts.dbt_helper</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../scripts/generate_pudl_duckdb/index.html">pudl.scripts.generate_pudl_duckdb</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../scripts/pudl_null_cols/index.html">pudl.scripts.pudl_null_cols</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../scripts/resource_description/index.html">pudl.scripts.resource_description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../scripts/zenodo_data_release/index.html">pudl.scripts.zenodo_data_release</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../settings/index.html">pudl.settings</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../transform/index.html">pudl.transform</a><input aria-label="Toggle navigation of pudl.transform" class="toctree-checkbox" id="toctree-checkbox-34" name="toctree-checkbox-34" role="switch" type="checkbox"/><label for="toctree-checkbox-34"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../transform/censuspep/index.html">pudl.transform.censuspep</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/classes/index.html">pudl.transform.classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/eia/index.html">pudl.transform.eia</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/eia176/index.html">pudl.transform.eia176</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/eia860/index.html">pudl.transform.eia860</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/eia860m/index.html">pudl.transform.eia860m</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/eia861/index.html">pudl.transform.eia861</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/eia923/index.html">pudl.transform.eia923</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/eia930/index.html">pudl.transform.eia930</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/eiaaeo/index.html">pudl.transform.eiaaeo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/eiaapi/index.html">pudl.transform.eiaapi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/epacems/index.html">pudl.transform.epacems</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/ferc/index.html">pudl.transform.ferc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/ferc1/index.html">pudl.transform.ferc1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/ferc714/index.html">pudl.transform.ferc714</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/ferccid/index.html">pudl.transform.ferccid</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/ferceqr/index.html">pudl.transform.ferceqr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/gridpathratoolkit/index.html">pudl.transform.gridpathratoolkit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/nrelatb/index.html">pudl.transform.nrelatb</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../transform/params/index.html">pudl.transform.params</a><input aria-label="Toggle navigation of pudl.transform.params" class="toctree-checkbox" id="toctree-checkbox-35" name="toctree-checkbox-35" role="switch" type="checkbox"/><label for="toctree-checkbox-35"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../transform/params/ferc1/index.html">pudl.transform.params.ferc1</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/phmsagas/index.html">pudl.transform.phmsagas</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/rus/index.html">pudl.transform.rus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/rus12/index.html">pudl.transform.rus12</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/rus7/index.html">pudl.transform.rus7</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/sec10k/index.html">pudl.transform.sec10k</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transform/vcerare/index.html">pudl.transform.vcerare</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../validate/index.html">pudl.validate</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../workspace/index.html">pudl.workspace</a><input aria-label="Toggle navigation of pudl.workspace" class="toctree-checkbox" id="toctree-checkbox-36" name="toctree-checkbox-36" role="switch" type="checkbox"/><label for="toctree-checkbox-36"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../workspace/datastore/index.html">pudl.workspace.datastore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../workspace/resource_cache/index.html">pudl.workspace.resource_cache</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../workspace/setup/index.html">pudl.workspace.setup</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../bibliography.html">Bibliography</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../../../../_sources/autoapi/pudl/analysis/timeseries_cleaning/index.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="module-pudl.analysis.timeseries_cleaning">
<span id="pudl-analysis-timeseries-cleaning"></span><h1>pudl.analysis.timeseries_cleaning<a class="headerlink" href="#module-pudl.analysis.timeseries_cleaning" title="Link to this heading">¶</a></h1>
<p>Screen timeseries for anomalies and impute missing and anomalous values.</p>
<p>For a narrative discussion of these methods aimed at data users, see
<a class="reference internal" href="../../../../methodology/timeseries_imputation.html"><span class="doc">Timeseries Imputation</span></a>.</p>
<p>The screening methods were originally designed to identify unrealistic data in the
electricity demand timeseries reported in <a class="reference internal" href="../../../../data_sources/eia930.html"><span class="doc">EIA Form 930 – Hourly and Daily Balancing Authority Operations Report</span></a>, and we have also
applied them to demand data from <a class="reference internal" href="../../../../data_sources/ferc714.html"><span class="doc">FERC Form 714 – Annual Electric Balancing Authority Area and Planning Area Report</span></a>.</p>
<p>Screening methods are adapted from code written and maintained by:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/truggles">Tyler Ruggles</a></p></li>
<li><p><a class="reference external" href="https://github.com/awongel">Alicia Wongel</a></p></li>
<li><p><a class="reference external" href="https://github.com/gschivley">Greg Schivley</a></p></li>
<li><p><a class="reference external" href="https://github.com/d-farnham">David Farnham</a></p></li>
</ul>
<p>And described at:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://doi.org/10.1038/s41597-020-0483-x">https://doi.org/10.1038/s41597-020-0483-x</a></p></li>
<li><p><a class="reference external" href="https://zenodo.org/record/3737085">https://zenodo.org/record/3737085</a></p></li>
<li><p><a class="reference external" href="https://github.com/truggles/EIA_Cleaned_Hourly_Electricity_Demand_Code">https://github.com/truggles/EIA_Cleaned_Hourly_Electricity_Demand_Code</a></p></li>
</ul>
<p>The imputation methods were designed for multivariate time series forecasting. They are
adapted from code published by <a class="reference external" href="https://xinychen.github.io/">Xinyu Chen</a> and
described at:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://arxiv.org/abs/2006.10436">https://arxiv.org/abs/2006.10436</a></p></li>
<li><p><a class="reference external" href="https://arxiv.org/abs/2008.03194">https://arxiv.org/abs/2008.03194</a></p></li>
<li><p><a class="reference external" href="https://github.com/xinychen/tensor-learning">https://github.com/xinychen/tensor-learning</a></p></li>
</ul>
<section id="attributes">
<h2>Attributes<a class="headerlink" href="#attributes" title="Link to this heading">¶</a></h2>
<div class="table-wrapper autosummary longtable docutils container">
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.logger" title="pudl.analysis.timeseries_cleaning.logger"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logger</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.STANDARD_UTC_OFFSETS" title="pudl.analysis.timeseries_cleaning.STANDARD_UTC_OFFSETS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">STANDARD_UTC_OFFSETS</span></code></a></p></td>
<td><p>Hour offset from Coordinated Universal Time (UTC) by time zone.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Link to this heading">¶</a></h2>
<div class="table-wrapper autosummary longtable docutils container">
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame" title="pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame"><code class="xref py py-obj docutils literal notranslate"><span class="pre">UTCTimeseriesDataFrame</span></code></a></p></td>
<td><p>Define schema of input tables for timeseries cleaning.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame" title="pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AlignedTimeseriesDataFrame</span></code></a></p></td>
<td><p>Define schema of input tables for timeseries cleaning.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TimeseriesMatrix</span></code></a></p></td>
<td><p>Define schema for timeseries matrix used during imputation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FlaggedTimeseries</span></code></a></p></td>
<td><p>Container class used to flag values in a timeseries matrix for imputation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.SimulateFlagsSettings" title="pudl.analysis.timeseries_cleaning.SimulateFlagsSettings"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SimulateFlagsSettings</span></code></a></p></td>
<td><p>Define settings used to simulate flagged values for scoring imputation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.SimulationDataFrame" title="pudl.analysis.timeseries_cleaning.SimulationDataFrame"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SimulationDataFrame</span></code></a></p></td>
<td><p>Collection of months of data which will be used to simulate flagged values.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings" title="pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ImputeTimeseriesSettings</span></code></a></p></td>
<td><p>Define settings used for timeseries imputation.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Link to this heading">¶</a></h2>
<div class="table-wrapper autosummary longtable docutils container">
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning._shift_utc" title="pudl.analysis.timeseries_cleaning._shift_utc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_shift_utc</span></code></a>(→ pandas.Series)</p></td>
<td><p>Shift <code class="docutils literal notranslate"><span class="pre">utc</span></code> by UTC offset.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.utc_dataframe_to_aligned" title="pudl.analysis.timeseries_cleaning.utc_dataframe_to_aligned"><code class="xref py py-obj docutils literal notranslate"><span class="pre">utc_dataframe_to_aligned</span></code></a>(...)</p></td>
<td><p>Return DataFrame with <code class="docutils literal notranslate"><span class="pre">datetime_utc</span></code> shifted by offset to align timeseries'.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.pivot_aligned_timeseries_dataframe" title="pudl.analysis.timeseries_cleaning.pivot_aligned_timeseries_dataframe"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pivot_aligned_timeseries_dataframe</span></code></a>(...)</p></td>
<td><p>Pivot aligned timeseries dataframe into timeseries matrix and pad if needed.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.melt_imputed_timeseries_matrix" title="pudl.analysis.timeseries_cleaning.melt_imputed_timeseries_matrix"><code class="xref py py-obj docutils literal notranslate"><span class="pre">melt_imputed_timeseries_matrix</span></code></a>(...)</p></td>
<td><p>Melt imputed timeseries matrix and flag matrix to time-aligned dataframe.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.slice_axis" title="pudl.analysis.timeseries_cleaning.slice_axis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">slice_axis</span></code></a>(→ tuple[slice, Ellipsis])</p></td>
<td><p>Return an index that slices an array along an axis.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.array_diff" title="pudl.analysis.timeseries_cleaning.array_diff"><code class="xref py py-obj docutils literal notranslate"><span class="pre">array_diff</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>First discrete difference of array elements.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.encode_run_length" title="pudl.analysis.timeseries_cleaning.encode_run_length"><code class="xref py py-obj docutils literal notranslate"><span class="pre">encode_run_length</span></code></a>(→ tuple[numpy.ndarray, numpy.ndarray])</p></td>
<td><p>Encode vector with run-length encoding.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.insert_run_length" title="pudl.analysis.timeseries_cleaning.insert_run_length"><code class="xref py py-obj docutils literal notranslate"><span class="pre">insert_run_length</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>Insert run-length encoded values into a vector.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning._mat2ten" title="pudl.analysis.timeseries_cleaning._mat2ten"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_mat2ten</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>Fold matrix into a tensor.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning._ten2mat" title="pudl.analysis.timeseries_cleaning._ten2mat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_ten2mat</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>Unfold tensor into a matrix.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning._svt_tnn" title="pudl.analysis.timeseries_cleaning._svt_tnn"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_svt_tnn</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>Singular value thresholding (SVT) truncated nuclear norm (TNN) minimization.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute_latc_tnn" title="pudl.analysis.timeseries_cleaning.impute_latc_tnn"><code class="xref py py-obj docutils literal notranslate"><span class="pre">impute_latc_tnn</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>Impute tensor values with LATC-TNN method by Chen and Sun (2020).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning._tsvt" title="pudl.analysis.timeseries_cleaning._tsvt"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_tsvt</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>Tensor singular value thresholding (TSVT).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute_latc_tubal" title="pudl.analysis.timeseries_cleaning.impute_latc_tubal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">impute_latc_tubal</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>Impute tensor values with LATC-Tubal method by Chen, Chen and Sun (2020).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_null" title="pudl.analysis.timeseries_cleaning.flag_null"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flag_null</span></code></a>(→ FlaggedTimeseries)</p></td>
<td><p>Flag null values (MISSING_VALUE).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_negative_or_zero" title="pudl.analysis.timeseries_cleaning.flag_negative_or_zero"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flag_negative_or_zero</span></code></a>(→ FlaggedTimeseries)</p></td>
<td><p>Flag negative or zero values (NEGATIVE_OR_ZERO).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_identical_run" title="pudl.analysis.timeseries_cleaning.flag_identical_run"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flag_identical_run</span></code></a>(→ FlaggedTimeseries)</p></td>
<td><p>Flag the last values in identical runs (IDENTICAL_RUN).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_global_outlier" title="pudl.analysis.timeseries_cleaning.flag_global_outlier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flag_global_outlier</span></code></a>(→ FlaggedTimeseries)</p></td>
<td><p>Flag values greater or less than n times the global median (GLOBAL_OUTLIER).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_global_outlier_neighbor" title="pudl.analysis.timeseries_cleaning.flag_global_outlier_neighbor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flag_global_outlier_neighbor</span></code></a>(→ FlaggedTimeseries)</p></td>
<td><p>Flag values neighboring global outliers (GLOBAL_OUTLIER_NEIGHBOR).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.rolling_median" title="pudl.analysis.timeseries_cleaning.rolling_median"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rolling_median</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>Rolling median of values.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.rolling_median_offset" title="pudl.analysis.timeseries_cleaning.rolling_median_offset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rolling_median_offset</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>Values minus the rolling median.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.median_of_rolling_median_offset" title="pudl.analysis.timeseries_cleaning.median_of_rolling_median_offset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">median_of_rolling_median_offset</span></code></a>() → numpy.ndarray)</p></td>
<td><p>Median of the offset from the rolling median.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.rolling_iqr_of_rolling_median_offset" title="pudl.analysis.timeseries_cleaning.rolling_iqr_of_rolling_median_offset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rolling_iqr_of_rolling_median_offset</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>Rolling interquartile range (IQR) of rolling median offset.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.median_prediction" title="pudl.analysis.timeseries_cleaning.median_prediction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">median_prediction</span></code></a>(, long_window)</p></td>
<td><p>Values predicted from local and regional rolling medians.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_local_outlier" title="pudl.analysis.timeseries_cleaning.flag_local_outlier"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flag_local_outlier</span></code></a>(, long_window, iqr_window, ...)</p></td>
<td><p>Flag local outliers (LOCAL_OUTLIER_HIGH, LOCAL_OUTLIER_LOW).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.diff" title="pudl.analysis.timeseries_cleaning.diff"><code class="xref py py-obj docutils literal notranslate"><span class="pre">diff</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>Values minus the value of their neighbor.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.rolling_iqr_of_diff" title="pudl.analysis.timeseries_cleaning.rolling_iqr_of_diff"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rolling_iqr_of_diff</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>Rolling interquartile range (IQR) of difference between neighboring values.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_double_delta" title="pudl.analysis.timeseries_cleaning.flag_double_delta"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flag_double_delta</span></code></a>(→ FlaggedTimeseries)</p></td>
<td><p>Flag values very different from neighbors on either side (DOUBLE_DELTA).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.relative_median_prediction" title="pudl.analysis.timeseries_cleaning.relative_median_prediction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">relative_median_prediction</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>Values divided by their value predicted from medians.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.iqr_of_diff_of_relative_median_prediction" title="pudl.analysis.timeseries_cleaning.iqr_of_diff_of_relative_median_prediction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">iqr_of_diff_of_relative_median_prediction</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>Interquartile range of running difference of relative median prediction.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning._find_single_delta" title="pudl.analysis.timeseries_cleaning._find_single_delta"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_find_single_delta</span></code></a>(→ numpy.ndarray)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_single_delta" title="pudl.analysis.timeseries_cleaning.flag_single_delta"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flag_single_delta</span></code></a>(, long_window, iqr_window, ...)</p></td>
<td><p>Flag values very different from the nearest unflagged value (SINGLE_DELTA).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_anomalous_region" title="pudl.analysis.timeseries_cleaning.flag_anomalous_region"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flag_anomalous_region</span></code></a>(→ FlaggedTimeseries)</p></td>
<td><p>Flag values surrounded by flagged values (ANOMALOUS_REGION).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_bad_years" title="pudl.analysis.timeseries_cleaning.flag_bad_years"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flag_bad_years</span></code></a>(→ FlaggedTimeseries)</p></td>
<td><p>Flag entire years, which are missing a large portion of values (BAD_YEAR).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_ruggles" title="pudl.analysis.timeseries_cleaning.flag_ruggles"><code class="xref py py-obj docutils literal notranslate"><span class="pre">flag_ruggles</span></code></a>(...)</p></td>
<td><p>Flag values following the method of Ruggles and others (2020).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.summarize_flags" title="pudl.analysis.timeseries_cleaning.summarize_flags"><code class="xref py py-obj docutils literal notranslate"><span class="pre">summarize_flags</span></code></a>(→ pandas.DataFrame)</p></td>
<td><p>Summarize flagged values by flag, count and median.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.simulate_nulls" title="pudl.analysis.timeseries_cleaning.simulate_nulls"><code class="xref py py-obj docutils literal notranslate"><span class="pre">simulate_nulls</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>Find non-null values to null to match a run-length distribution.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.fold_tensor" title="pudl.analysis.timeseries_cleaning.fold_tensor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fold_tensor</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>Fold into a 3-dimensional tensor representation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.unfold_tensor" title="pudl.analysis.timeseries_cleaning.unfold_tensor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unfold_tensor</span></code></a>(→ numpy.ndarray)</p></td>
<td><p>Unfold a 3-dimensional tensor representation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute" title="pudl.analysis.timeseries_cleaning.impute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">impute</span></code></a>(→ pandera.typing.DataFrame[TimeseriesMatrix])</p></td>
<td><p>Impute null values.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.summarize_imputed" title="pudl.analysis.timeseries_cleaning.summarize_imputed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">summarize_imputed</span></code></a>(→ pandas.DataFrame)</p></td>
<td><p>Summarize the fit of imputed values to actual values.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute_flagged_values" title="pudl.analysis.timeseries_cleaning.impute_flagged_values"><code class="xref py py-obj docutils literal notranslate"><span class="pre">impute_flagged_values</span></code></a>(...)</p></td>
<td><p>Impute null values in input timeseries matrix.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning._merge_imputed" title="pudl.analysis.timeseries_cleaning._merge_imputed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_merge_imputed</span></code></a>(→ pandas.DataFrame)</p></td>
<td><p>Helper function to melt imputed timeseries matrix and merge back on input asset.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning._add_simulated_flag_col" title="pudl.analysis.timeseries_cleaning._add_simulated_flag_col"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_add_simulated_flag_col</span></code></a>(...)</p></td>
<td><p>Return a modified <code class="docutils literal notranslate"><span class="pre">imputed_df</span></code> with a column indicating which rows should be flagged for simulation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.get_simulated_flag_mask" title="pudl.analysis.timeseries_cleaning.get_simulated_flag_mask"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_simulated_flag_mask</span></code></a>(...)</p></td>
<td><p>Return a flag mask to flag values for simulated imputation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute_timeseries_asset_factory" title="pudl.analysis.timeseries_cleaning.impute_timeseries_asset_factory"><code class="xref py py-obj docutils literal notranslate"><span class="pre">impute_timeseries_asset_factory</span></code></a>() → pandas.DataFrame)</p></td>
<td><p>Produces assets to impute values for a given timeseries table/column.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Link to this heading">¶</a></h2>
<dl class="py data">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.logger">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">logger</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.logger" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.STANDARD_UTC_OFFSETS">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">STANDARD_UTC_OFFSETS</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#STANDARD_UTC_OFFSETS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.STANDARD_UTC_OFFSETS" title="Link to this definition">¶</a></dt>
<dd><p>Hour offset from Coordinated Universal Time (UTC) by time zone.</p>
<p>Time zones are canonical names (e.g. ‘America/Denver’) from tzdata (
<a class="reference external" href="https://www.iana.org/time-zones">https://www.iana.org/time-zones</a>)
mapped to their standard-time UTC offset.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">UTCTimeseriesDataFrame</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#UTCTimeseriesDataFrame"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-obj docutils literal notranslate"><span class="pre">pandera.pandas.DataFrameModel</span></code></p>
<p>Define schema of input tables for timeseries cleaning.</p>
<p>This model defines the expected structure of an input dataframe to the timeseries
imputation process. It will be be immediately converted to a
<a class="reference internal" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame" title="pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">AlignedTimeseriesDataFrame</span></code></a>, then pivoted to a <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeseriesMatrix</span></code></a>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame.id_col">
<span class="sig-name descname"><span class="pre">id_col</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.Series.html#pandera.typing.Series" title="(in pandera)"><span class="pre">pandera.typing.Series</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#UTCTimeseriesDataFrame.id_col"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame.id_col" title="Link to this definition">¶</a></dt>
<dd><p>Entity ID column(s). Used to group timeseries by entity.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame.datetime_utc">
<span class="sig-name descname"><span class="pre">datetime_utc</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.Series.html#pandera.typing.Series" title="(in pandera)"><span class="pre">pandera.typing.Series</span></a><span class="p"><span class="pre">[</span></span><span class="pre">pandera.pandas.dtypes.DateTime</span><span class="p"><span class="pre">]</span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#UTCTimeseriesDataFrame.datetime_utc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame.datetime_utc" title="Link to this definition">¶</a></dt>
<dd><p>Datetimes in UTC timezone.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame.timezone">
<span class="sig-name descname"><span class="pre">timezone</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.Series.html#pandera.typing.Series" title="(in pandera)"><span class="pre">pandera.typing.Series</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#UTCTimeseriesDataFrame.timezone"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame.timezone" title="Link to this definition">¶</a></dt>
<dd><p>Local timezone of entity.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame.value_col">
<span class="sig-name descname"><span class="pre">value_col</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.Series.html#pandera.typing.Series" title="(in pandera)"><span class="pre">pandera.typing.Series</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Float64Dtype.html#pandas.Float64Dtype" title="(in pandas v3.0.1)"><span class="pre">pandas.Float64Dtype</span></a><span class="p"><span class="pre">]</span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#UTCTimeseriesDataFrame.value_col"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame.value_col" title="Link to this definition">¶</a></dt>
<dd><p>Column containing actual values to impute.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">AlignedTimeseriesDataFrame</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#AlignedTimeseriesDataFrame"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-obj docutils literal notranslate"><span class="pre">pandera.pandas.DataFrameModel</span></code></p>
<p>Define schema of input tables for timeseries cleaning.</p>
<p>This model is nearly identical to a <code class="docutils literal notranslate"><span class="pre">UTCTimeseriesDataFrame</span></code>, but the
<code class="docutils literal notranslate"><span class="pre">datetime_utc</span></code> values are aligned to “local” <code class="docutils literal notranslate"><span class="pre">datetime</span></code>’s using a fixed UTC
offset.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame.id_col">
<span class="sig-name descname"><span class="pre">id_col</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.Series.html#pandera.typing.Series" title="(in pandera)"><span class="pre">pandera.typing.Series</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#AlignedTimeseriesDataFrame.id_col"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame.id_col" title="Link to this definition">¶</a></dt>
<dd><p>Entity ID column(s). Used to group timeseries by entity.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame.datetime">
<span class="sig-name descname"><span class="pre">datetime</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.Series.html#pandera.typing.Series" title="(in pandera)"><span class="pre">pandera.typing.Series</span></a><span class="p"><span class="pre">[</span></span><span class="pre">pandera.pandas.dtypes.DateTime</span><span class="p"><span class="pre">]</span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#AlignedTimeseriesDataFrame.datetime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame.datetime" title="Link to this definition">¶</a></dt>
<dd><p>Datetimes shifted by UTC offset to align all timeseries’.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame.value_col">
<span class="sig-name descname"><span class="pre">value_col</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.Series.html#pandera.typing.Series" title="(in pandera)"><span class="pre">pandera.typing.Series</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Float64Dtype.html#pandas.Float64Dtype" title="(in pandas v3.0.1)"><span class="pre">pandas.Float64Dtype</span></a><span class="p"><span class="pre">]</span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#AlignedTimeseriesDataFrame.value_col"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame.value_col" title="Link to this definition">¶</a></dt>
<dd><p>Column containing actual values to impute.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame.flags">
<span class="sig-name descname"><span class="pre">flags</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.Series.html#pandera.typing.Series" title="(in pandera)"><span class="pre">pandera.typing.Series</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#AlignedTimeseriesDataFrame.flags"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame.flags" title="Link to this definition">¶</a></dt>
<dd><p>Column indicating why value was flagged for imputation.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.TimeseriesMatrix">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">TimeseriesMatrix</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#TimeseriesMatrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-obj docutils literal notranslate"><span class="pre">pandera.pandas.DataFrameModel</span></code></p>
<p>Define schema for timeseries matrix used during imputation.</p>
<p>TimeseriesMatrix is the main type used during imputation. It is a dataframe with a
<cite>datetime</cite> row index (e.g. ‘2006-01-01 00:00:00’, …, ‘2019-12-31 23:00:00’) in
local time ignoring daylight-savings, and a <cite>id_col</cite> column index (e.g. 101, …,
329). Since the columns are dynamically generated by pivoting a
<code class="docutils literal notranslate"><span class="pre">AlignedTimeseriesDataFrame</span></code>, this model only explicitly defines the <code class="docutils literal notranslate"><span class="pre">datetime</span></code>
index. The primary purpose of this type is to annotate methods in this module, so
the expected inputs and outputs are immediately clear.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.TimeseriesMatrix.datetime">
<span class="sig-name descname"><span class="pre">datetime</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.Index.html#pandera.typing.Index" title="(in pandera)"><span class="pre">pandera.typing.Index</span></a><span class="p"><span class="pre">[</span></span><span class="pre">pandera.pandas.dtypes.DateTime</span><span class="p"><span class="pre">]</span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#TimeseriesMatrix.datetime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix.datetime" title="Link to this definition">¶</a></dt>
<dd><p>Index timeseries matrix by datetime.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning._shift_utc">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">_shift_utc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">utc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html#pandas.Series" title="(in pandas v3.0.1)"><span class="pre">pandas.Series</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">utc_offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html#pandas.Series" title="(in pandas v3.0.1)"><span class="pre">pandas.Series</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html#pandas.Series" title="(in pandas v3.0.1)"><span class="pre">pandas.Series</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#_shift_utc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning._shift_utc" title="Link to this definition">¶</a></dt>
<dd><p>Shift <code class="docutils literal notranslate"><span class="pre">utc</span></code> by UTC offset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>utc</strong> – UTC times (tz-naive <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> or <code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">UTC]</span></code>).</p></li>
<li><p><strong>utc_offset</strong> – For each datetime in <code class="docutils literal notranslate"><span class="pre">utc</span></code> a corresponding offset in hours.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Shifted datetimes (tz-naive <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code>).</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_shift_utc</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">])</span>
<span class="go">0   2019-12-31 17:00:00</span>
<span class="go">1   2019-12-31 18:00:00</span>
<span class="go">dtype: datetime64[ns]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.utc_dataframe_to_aligned">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">utc_dataframe_to_aligned</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame" title="pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame"><span class="pre">UTCTimeseriesDataFrame</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame" title="pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame"><span class="pre">AlignedTimeseriesDataFrame</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#utc_dataframe_to_aligned"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.utc_dataframe_to_aligned" title="Link to this definition">¶</a></dt>
<dd><p>Return DataFrame with <code class="docutils literal notranslate"><span class="pre">datetime_utc</span></code> shifted by offset to align timeseries’.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.pivot_aligned_timeseries_dataframe">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">pivot_aligned_timeseries_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aligned_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame" title="pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame"><span class="pre">AlignedTimeseriesDataFrame</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'value_col'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><span class="pre">TimeseriesMatrix</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#pivot_aligned_timeseries_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.pivot_aligned_timeseries_dataframe" title="Link to this definition">¶</a></dt>
<dd><p>Pivot aligned timeseries dataframe into timeseries matrix and pad if needed.</p>
<p>Padding finds the complete list of hours from the start of the first day
present in the timeseries to the end of the last, and then fills any missing hours
with NULLs.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.melt_imputed_timeseries_matrix">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">melt_imputed_timeseries_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imputed_matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><span class="pre">TimeseriesMatrix</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><span class="pre">TimeseriesMatrix</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame" title="pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame"><span class="pre">AlignedTimeseriesDataFrame</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#melt_imputed_timeseries_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.melt_imputed_timeseries_matrix" title="Link to this definition">¶</a></dt>
<dd><p>Melt imputed timeseries matrix and flag matrix to time-aligned dataframe.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.FlaggedTimeseries">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">FlaggedTimeseries</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#FlaggedTimeseries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="Link to this definition">¶</a></dt>
<dd><p>Container class used to flag values in a timeseries matrix for imputation.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.FlaggedTimeseries.x">
<span class="sig-name descname"><span class="pre">x</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#FlaggedTimeseries.x"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.x" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.FlaggedTimeseries.columns">
<span class="sig-name descname"><span class="pre">columns</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Index.html#pandas.Index" title="(in pandas v3.0.1)"><span class="pre">pandas.Index</span></a></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#FlaggedTimeseries.columns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.columns" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.FlaggedTimeseries.index">
<span class="sig-name descname"><span class="pre">index</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Index.html#pandas.Index" title="(in pandas v3.0.1)"><span class="pre">pandas.Index</span></a></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#FlaggedTimeseries.index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.index" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.FlaggedTimeseries.flags">
<span class="sig-name descname"><span class="pre">flags</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#FlaggedTimeseries.flags"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.flags" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.FlaggedTimeseries.uuid">
<span class="sig-name descname"><span class="pre">uuid</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#FlaggedTimeseries.uuid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.uuid" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.FlaggedTimeseries.__hash__">
<span class="sig-name descname"><span class="pre">__hash__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#FlaggedTimeseries.__hash__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.__hash__" title="Link to this definition">¶</a></dt>
<dd><p>Implement hash for lru_cache.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.FlaggedTimeseries.from_timeseries_matrix">
<span class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></span><span class="sig-name descname"><span class="pre">from_timeseries_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v3.0.1)"><span class="pre">pandas.DataFrame</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">flags</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v3.0.1)"><span class="pre">pandas.DataFrame</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#FlaggedTimeseries.from_timeseries_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.from_timeseries_matrix" title="Link to this definition">¶</a></dt>
<dd><p>Create a timeseries object from a dataframe.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.FlaggedTimeseries.to_dataframes">
<span class="sig-name descname"><span class="pre">to_dataframes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v3.0.1)"><span class="pre">pandas.DataFrame</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v3.0.1)"><span class="pre">pandas.DataFrame</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#FlaggedTimeseries.to_dataframes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.to_dataframes" title="Link to this definition">¶</a></dt>
<dd><p>Convert back to a dataframe.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.FlaggedTimeseries.flag">
<span class="sig-name descname"><span class="pre">flag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../metadata/dfs/index.html#pudl.metadata.dfs.ImputationReasonCodes" title="pudl.metadata.dfs.ImputationReasonCodes"><span class="pre">pudl.metadata.dfs.ImputationReasonCodes</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#FlaggedTimeseries.flag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.flag" title="Link to this definition">¶</a></dt>
<dd><p>Flag values.</p>
<p>Flags values (if not already flagged) and nulls flagged values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask</strong> – Boolean mask of the values to flag.</p></li>
<li><p><strong>flag</strong> – Flag name.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.slice_axis">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">slice_axis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#slice" title="(in Python v3.14)"><span class="pre">slice</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Ellipsis</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#slice_axis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.slice_axis" title="Link to this definition">¶</a></dt>
<dd><p>Return an index that slices an array along an axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – Array to slice.</p></li>
<li><p><strong>start</strong> – Start index of slice.</p></li>
<li><p><strong>end</strong> – End index of slice.</p></li>
<li><p><strong>step</strong> – Step size of slice.</p></li>
<li><p><strong>axis</strong> – Axis along which to slice.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple of <a class="reference external" href="https://docs.python.org/3/library/functions.html#slice" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">slice</span></code></a> that slices array <cite>x</cite> along axis <cite>axis</cite>
(<cite>x[…, start:stop:step]</cite>).</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">==</span> <span class="n">x</span><span class="p">[</span><span class="n">slice_axis</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)])</span>
<span class="go">np.True_</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">x</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">==</span> <span class="n">x</span><span class="p">[</span><span class="n">slice_axis</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)])</span>
<span class="go">np.True_</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">x</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">==</span> <span class="n">x</span><span class="p">[</span><span class="n">slice_axis</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)])</span>
<span class="go">np.True_</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.array_diff">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">array_diff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">periods</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">np.nan</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#array_diff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.array_diff" title="Link to this definition">¶</a></dt>
<dd><p>First discrete difference of array elements.</p>
<p>This is a fast numpy implementation of <code class="xref py py-meth docutils literal notranslate"><span class="pre">pd.DataFrame.diff()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>periods</strong> – Periods to shift for calculating difference, accepts negative values.</p></li>
<li><p><strong>axis</strong> – Array axis along which to calculate the difference.</p></li>
<li><p><strong>fill</strong> – Value to use at the margins where a difference cannot be calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Array of same shape and type as <cite>x</cite> with discrete element differences.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">array_diff</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()[</span><span class="mi">1</span><span class="p">:])</span>
<span class="go">np.True_</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">array_diff</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()[</span><span class="mi">2</span><span class="p">:])</span>
<span class="go">np.True_</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">array_diff</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="go">np.True_</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.encode_run_length">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">encode_run_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.14)"><span class="pre">collections.abc.Sequence</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#encode_run_length"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.encode_run_length" title="Link to this definition">¶</a></dt>
<dd><p>Encode vector with run-length encoding.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> – Vector to encode.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Values and their run lengths.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encode_run_length</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">(array([0, 1, 0, 1]), array([1, 2, 1, 1]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encode_run_length</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;bool&#39;</span><span class="p">))</span>
<span class="go">(array([False,  True, False,  True]), array([1, 2, 1, 1]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encode_run_length</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;&lt;U1&#39;</span><span class="p">))</span>
<span class="go">(array([&#39;0&#39;, &#39;1&#39;, &#39;0&#39;, &#39;1&#39;], dtype=&#39;&lt;U1&#39;), array([1, 2, 1, 1]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encode_run_length</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
<span class="go">(array([nan,  1., nan,  1.]), array([1, 2, 1, 1]))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.insert_run_length">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">insert_run_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.14)"><span class="pre">collections.abc.Sequence</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.14)"><span class="pre">collections.abc.Sequence</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">lengths</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.14)"><span class="pre">collections.abc.Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.14)"><span class="pre">collections.abc.Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">padding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#insert_run_length"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.insert_run_length" title="Link to this definition">¶</a></dt>
<dd><p>Insert run-length encoded values into a vector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – Vector to insert values into.</p></li>
<li><p><strong>values</strong> – Values to insert.</p></li>
<li><p><strong>lengths</strong> – Length of run to insert for each value in <cite>values</cite>.</p></li>
<li><p><strong>mask</strong> – Boolean mask, of the same length as <cite>x</cite>, where values can be inserted.
By default, values can be inserted anywhere in <cite>x</cite>.</p></li>
<li><p><strong>padding</strong> – Minimum space between inserted runs and,
if <cite>mask</cite> is provided, the edges of masked-out areas.</p></li>
<li><p><strong>intersect</strong> – Whether to allow inserted runs to intersect each other.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – Padding must zero or greater.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – Run length must be greater than zero.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – Could not find space for run of length {length}.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Copy of array <cite>x</cite> with values inserted.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">insert_run_length</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">lengths</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
<span class="go">array([1, 0, 2, 2])</span>
</pre></div>
</div>
<p>If we use unique values for the background and each inserted run,
the run length encoding of the result (ignoring the background)
is the same as the inserted run, albeit in a different order.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lengths</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">insert_run_length</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">lengths</span><span class="o">=</span><span class="n">lengths</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rvalues</span><span class="p">,</span> <span class="n">rlengths</span> <span class="o">=</span> <span class="n">encode_run_length</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">order</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">rvalues</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">all</span><span class="p">(</span><span class="n">rvalues</span><span class="p">[</span><span class="n">order</span><span class="p">]</span> <span class="o">==</span> <span class="n">values</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="n">rlengths</span><span class="p">[</span><span class="n">order</span><span class="p">]</span> <span class="o">==</span> <span class="n">lengths</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Null values can be inserted into a vector such that the new null runs
match the run length encoding of the existing null runs.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_nan</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rvalues</span><span class="p">,</span> <span class="n">rlengths</span> <span class="o">=</span> <span class="n">encode_run_length</span><span class="p">(</span><span class="n">is_nan</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xi</span> <span class="o">=</span> <span class="n">insert_run_length</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">x</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]</span> <span class="o">*</span> <span class="n">rvalues</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
<span class="gp">... </span>    <span class="n">lengths</span><span class="o">=</span><span class="n">rlengths</span><span class="p">[</span><span class="n">rvalues</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">mask</span><span class="o">=~</span><span class="n">is_nan</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">xi</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">is_nan</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">np.True_</span>
</pre></div>
</div>
<p>The same as above, with non-zero <cite>padding</cite>, yields a unique solution:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">insert_run_length</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">x</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]</span> <span class="o">*</span> <span class="n">rvalues</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
<span class="gp">... </span>    <span class="n">lengths</span><span class="o">=</span><span class="n">rlengths</span><span class="p">[</span><span class="n">rvalues</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">mask</span><span class="o">=~</span><span class="n">is_nan</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">padding</span><span class="o">=</span><span class="mi">1</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">array([nan,  2., nan, nan,  5., nan, nan,  8., nan])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning._mat2ten">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">_mat2ten</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#_mat2ten"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning._mat2ten" title="Link to this definition">¶</a></dt>
<dd><p>Fold matrix into a tensor.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning._ten2mat">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">_ten2mat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tensor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#_ten2mat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning._ten2mat" title="Link to this definition">¶</a></dt>
<dd><p>Unfold tensor into a matrix.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning._svt_tnn">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">_svt_tnn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#_svt_tnn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning._svt_tnn" title="Link to this definition">¶</a></dt>
<dd><p>Singular value thresholding (SVT) truncated nuclear norm (TNN) minimization.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.impute_latc_tnn">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">impute_latc_tnn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tensor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">lags</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.14)"><span class="pre">collections.abc.Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[1]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.14)"><span class="pre">collections.abc.Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[1</span> <span class="pre">/</span> <span class="pre">3,</span> <span class="pre">1</span> <span class="pre">/</span> <span class="pre">3,</span> <span class="pre">1</span> <span class="pre">/</span> <span class="pre">3]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rho0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-07</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lambda0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2e-07</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-07</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxiter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">300</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#impute_latc_tnn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.impute_latc_tnn" title="Link to this definition">¶</a></dt>
<dd><p>Impute tensor values with LATC-TNN method by Chen and Sun (2020).</p>
<p>Uses low-rank autoregressive tensor completion (LATC) with
truncated nuclear norm (TNN) minimization.</p>
<ul class="simple">
<li><p>description: <a class="reference external" href="https://arxiv.org/abs/2006.10436">https://arxiv.org/abs/2006.10436</a></p></li>
<li><p>code: <a class="reference external" href="https://github.com/xinychen/tensor-learning/blob/master/mats">https://github.com/xinychen/tensor-learning/blob/master/mats</a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tensor</strong> – Observational series in the form (series, groups, periods).
Null values are replaced with zeros, so any zeros will be treated as null.</p></li>
<li><p><strong>lags</strong></p></li>
<li><p><strong>alpha</strong></p></li>
<li><p><strong>rho0</strong></p></li>
<li><p><strong>lambda0</strong></p></li>
<li><p><strong>theta</strong></p></li>
<li><p><strong>epsilon</strong> – Convergence criterion. A smaller number will result in more iterations.</p></li>
<li><p><strong>maxiter</strong> – Maximum number of iterations.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tensor with missing values in <cite>tensor</cite> replaced by imputed values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning._tsvt">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">_tsvt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tensor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#_tsvt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning._tsvt" title="Link to this definition">¶</a></dt>
<dd><p>Tensor singular value thresholding (TSVT).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.impute_latc_tubal">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">impute_latc_tubal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tensor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">lags</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.14)"><span class="pre">collections.abc.Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[1]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rho0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-07</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lambda0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2e-07</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-07</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxiter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">300</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#impute_latc_tubal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.impute_latc_tubal" title="Link to this definition">¶</a></dt>
<dd><p>Impute tensor values with LATC-Tubal method by Chen, Chen and Sun (2020).</p>
<p>Uses low-tubal-rank autoregressive tensor completion (LATC-Tubal).
It is much faster than <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute_latc_tnn" title="pudl.analysis.timeseries_cleaning.impute_latc_tnn"><code class="xref py py-func docutils literal notranslate"><span class="pre">impute_latc_tnn()</span></code></a> for very large datasets,
with comparable accuracy.</p>
<ul class="simple">
<li><p>description: <a class="reference external" href="https://arxiv.org/abs/2008.03194">https://arxiv.org/abs/2008.03194</a></p></li>
<li><p>code: <a class="reference external" href="https://github.com/xinychen/tensor-learning/blob/master/mats">https://github.com/xinychen/tensor-learning/blob/master/mats</a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tensor</strong> – Observational series in the form (series, groups, periods).
Null values are replaced with zeros, so any zeros will be treated as null.</p></li>
<li><p><strong>lags</strong></p></li>
<li><p><strong>rho0</strong></p></li>
<li><p><strong>lambda0</strong></p></li>
<li><p><strong>epsilon</strong> – Convergence criterion. A smaller number will result in more iterations.</p></li>
<li><p><strong>maxiter</strong> – Maximum number of iterations.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tensor with missing values in <cite>tensor</cite> replaced by imputed values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.flag_null">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">flag_null</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#flag_null"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.flag_null" title="Link to this definition">¶</a></dt>
<dd><p>Flag null values (MISSING_VALUE).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.flag_negative_or_zero">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">flag_negative_or_zero</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#flag_negative_or_zero"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.flag_negative_or_zero" title="Link to this definition">¶</a></dt>
<dd><p>Flag negative or zero values (NEGATIVE_OR_ZERO).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.flag_identical_run">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">flag_identical_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#flag_identical_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.flag_identical_run" title="Link to this definition">¶</a></dt>
<dd><p>Flag the last values in identical runs (IDENTICAL_RUN).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>length</strong> – Run length to flag.
If <cite>3</cite>, the third (and subsequent) identical values are flagged.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – Run length must be 2 or greater.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.flag_global_outlier">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">flag_global_outlier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">medians</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">9</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#flag_global_outlier"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.flag_global_outlier" title="Link to this definition">¶</a></dt>
<dd><p>Flag values greater or less than n times the global median (GLOBAL_OUTLIER).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>medians</strong> – Number of times the median the value must exceed the median.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.flag_global_outlier_neighbor">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">flag_global_outlier_neighbor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">neighbors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#flag_global_outlier_neighbor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.flag_global_outlier_neighbor" title="Link to this definition">¶</a></dt>
<dd><p>Flag values neighboring global outliers (GLOBAL_OUTLIER_NEIGHBOR).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>neighbors</strong> – Number of neighbors to flag on either side of each outlier.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – Global outliers must be flagged first.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.rolling_median">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">rolling_median</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">48</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#rolling_median"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.rolling_median" title="Link to this definition">¶</a></dt>
<dd><p>Rolling median of values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>window</strong> – Number of values in the moving window.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.rolling_median_offset">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">rolling_median_offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">48</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#rolling_median_offset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.rolling_median_offset" title="Link to this definition">¶</a></dt>
<dd><p>Values minus the rolling median.</p>
<p>Estimates the local cycle in cyclical data by removing longterm trends.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>window</strong> – Number of values in the moving window.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.median_of_rolling_median_offset">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">median_of_rolling_median_offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">48</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shifts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.14)"><span class="pre">collections.abc.Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">range(-240,</span> <span class="pre">241,</span> <span class="pre">24)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#median_of_rolling_median_offset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.median_of_rolling_median_offset" title="Link to this definition">¶</a></dt>
<dd><p>Median of the offset from the rolling median.</p>
<p>Calculated by shifting the rolling median offset (<a class="reference internal" href="#pudl.analysis.timeseries_cleaning.rolling_median_offset" title="pudl.analysis.timeseries_cleaning.rolling_median_offset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rolling_median_offset()</span></code></a>)
by different numbers of values, then taking the median at each position.
Estimates the typical local cycle in cyclical data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>window</strong> – Number of values in the moving window for the rolling median.</p></li>
<li><p><strong>shifts</strong> – Number of values to shift the rolling median offset by.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.rolling_iqr_of_rolling_median_offset">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">rolling_iqr_of_rolling_median_offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">48</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iqr_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">240</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#rolling_iqr_of_rolling_median_offset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.rolling_iqr_of_rolling_median_offset" title="Link to this definition">¶</a></dt>
<dd><p>Rolling interquartile range (IQR) of rolling median offset.</p>
<p>Estimates the spread of the local cycles in cyclical data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>window</strong> – Number of values in the moving window for the rolling median.</p></li>
<li><p><strong>iqr_window</strong> – Number of values in the moving window for the rolling IQR.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.median_prediction">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">median_prediction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">48</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shifts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.14)"><span class="pre">collections.abc.Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">range(-240,</span> <span class="pre">241,</span> <span class="pre">24)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">480</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#median_prediction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.median_prediction" title="Link to this definition">¶</a></dt>
<dd><p>Values predicted from local and regional rolling medians.</p>
<p>Calculated as <cite>{ local median } +
{ median of local median offset } * { local median } / { regional median }</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>window</strong> – Number of values in the moving window for the local rolling median.</p></li>
<li><p><strong>shifts</strong> – Positions to shift the local rolling median offset by,
for computing its median.</p></li>
<li><p><strong>long_window</strong> – Number of values in the moving window
for the regional (long) rolling median.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.flag_local_outlier">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">flag_local_outlier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">48</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shifts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.14)"><span class="pre">collections.abc.Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">range(-240,</span> <span class="pre">241,</span> <span class="pre">24)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">480</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iqr_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">240</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiplier</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">(3.5,</span> <span class="pre">2.5)</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#flag_local_outlier"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.flag_local_outlier" title="Link to this definition">¶</a></dt>
<dd><p>Flag local outliers (LOCAL_OUTLIER_HIGH, LOCAL_OUTLIER_LOW).</p>
<p>Flags values which are above or below the <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.median_prediction" title="pudl.analysis.timeseries_cleaning.median_prediction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">median_prediction()</span></code></a> by more than
a <cite>multiplier</cite> times the <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.rolling_iqr_of_rolling_median_offset" title="pudl.analysis.timeseries_cleaning.rolling_iqr_of_rolling_median_offset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rolling_iqr_of_rolling_median_offset()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>window</strong> – Number of values in the moving window for the local rolling median.</p></li>
<li><p><strong>shifts</strong> – Positions to shift the local rolling median offset by,
for computing its median.</p></li>
<li><p><strong>long_window</strong> – Number of values in the moving window
for the regional (long) rolling median.</p></li>
<li><p><strong>iqr_window</strong> – Number of values in the moving window
for the rolling interquartile range (IQR).</p></li>
<li><p><strong>multiplier</strong> – Number of times the <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.rolling_iqr_of_rolling_median_offset" title="pudl.analysis.timeseries_cleaning.rolling_iqr_of_rolling_median_offset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rolling_iqr_of_rolling_median_offset()</span></code></a>
the value must be above (HIGH) and below (LOW)
the <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.median_prediction" title="pudl.analysis.timeseries_cleaning.median_prediction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">median_prediction()</span></code></a> to be flagged.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.diff">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">diff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#diff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.diff" title="Link to this definition">¶</a></dt>
<dd><p>Values minus the value of their neighbor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>shift</strong> – Positions to shift for calculating the difference.
Positive values select a preceding (left) neighbor.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.rolling_iqr_of_diff">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">rolling_iqr_of_diff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">240</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#rolling_iqr_of_diff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.rolling_iqr_of_diff" title="Link to this definition">¶</a></dt>
<dd><p>Rolling interquartile range (IQR) of difference between neighboring values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shift</strong> – Positions to shift for calculating the difference.</p></li>
<li><p><strong>window</strong> – Number of values in the moving window for the rolling IQR.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.flag_double_delta">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">flag_double_delta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">iqr_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">240</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiplier</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#flag_double_delta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.flag_double_delta" title="Link to this definition">¶</a></dt>
<dd><p>Flag values very different from neighbors on either side (DOUBLE_DELTA).</p>
<p>Flags values whose differences to both neighbors on either side exceeds a
<cite>multiplier</cite> times the rolling interquartile range (IQR) of neighbor difference.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iqr_window</strong> – Number of values in the moving window for the rolling IQR
of neighbor difference.</p></li>
<li><p><strong>multiplier</strong> – Number of times the rolling IQR of neighbor difference
the value’s difference to its neighbors must exceed
for the value to be flagged.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.relative_median_prediction">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">relative_median_prediction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#relative_median_prediction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.relative_median_prediction" title="Link to this definition">¶</a></dt>
<dd><p>Values divided by their value predicted from medians.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>kwargs</strong> – Arguments to <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.median_prediction" title="pudl.analysis.timeseries_cleaning.median_prediction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">median_prediction()</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.iqr_of_diff_of_relative_median_prediction">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">iqr_of_diff_of_relative_median_prediction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#iqr_of_diff_of_relative_median_prediction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.iqr_of_diff_of_relative_median_prediction" title="Link to this definition">¶</a></dt>
<dd><p>Interquartile range of running difference of relative median prediction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shift</strong> – Positions to shift for calculating the difference.
Positive values select a preceding (left) neighbor.</p></li>
<li><p><strong>kwargs</strong> – Arguments to <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.relative_median_prediction" title="pudl.analysis.timeseries_cleaning.relative_median_prediction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">relative_median_prediction()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning._find_single_delta">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">_find_single_delta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative_median_prediction</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative_median_prediction_long</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">rolling_iqr_of_diff</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">iqr_of_diff_of_relative_median_prediction</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#_find_single_delta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning._find_single_delta" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.flag_single_delta">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">flag_single_delta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">48</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shifts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.14)"><span class="pre">collections.abc.Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">range(-240,</span> <span class="pre">241,</span> <span class="pre">24)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">480</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iqr_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">240</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiplier</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rel_multiplier</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">15</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#flag_single_delta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.flag_single_delta" title="Link to this definition">¶</a></dt>
<dd><p>Flag values very different from the nearest unflagged value (SINGLE_DELTA).</p>
<p>Flags values whose difference to the nearest unflagged value,
with respect to value and relative median prediction,
differ by less than a multiplier times the rolling interquartile range (IQR)
of the difference -
<cite>multiplier</cite> times <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.rolling_iqr_of_diff" title="pudl.analysis.timeseries_cleaning.rolling_iqr_of_diff"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rolling_iqr_of_diff()</span></code></a> and
<cite>rel_multiplier</cite> times <code class="xref py py-meth docutils literal notranslate"><span class="pre">iqr_of_diff_of_relative_mean_prediction()</span></code>,
respectively.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>window</strong> – Number of values in the moving window for the rolling median
(for the relative median prediction).</p></li>
<li><p><strong>shifts</strong> – Positions to shift the local rolling median offset by,
for computing its median (for the relative median prediction).</p></li>
<li><p><strong>long_window</strong> – Number of values in the moving window for the long rolling
median (for the relative median prediction).</p></li>
<li><p><strong>iqr_window</strong> – Number of values in the moving window for the rolling IQR
of neighbor difference.</p></li>
<li><p><strong>multiplier</strong> – Number of times the rolling IQR of neighbor difference
the value’s difference to its neighbor must exceed
for the value to be flagged.</p></li>
<li><p><strong>rel_multiplier</strong> – Number of times the rolling IQR of relative median
prediction the value’s prediction difference to its neighbor must exceed
for the value to be flagged.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.flag_anomalous_region">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">flag_anomalous_region</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">48</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.15</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#flag_anomalous_region"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.flag_anomalous_region" title="Link to this definition">¶</a></dt>
<dd><p>Flag values surrounded by flagged values (ANOMALOUS_REGION).</p>
<p>Original null values are not considered flagged values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>window</strong> – Width of regions.</p></li>
<li><p><strong>threshold</strong> – Fraction of flagged values required for a region to be flagged.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.flag_bad_years">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">flag_bad_years</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_data_fraction</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.9</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><span class="pre">FlaggedTimeseries</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#flag_bad_years"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.flag_bad_years" title="Link to this definition">¶</a></dt>
<dd><p>Flag entire years, which are missing a large portion of values (BAD_YEAR).</p>
<p>This method checks two separate thresholds to determine whether a year is “bad”.
First, it finds the range from the first non-null hour to the last non-null hour
for each respondent-year. If that total range is less than <code class="docutils literal notranslate"><span class="pre">min_data</span></code>, then the
year is dropped. Next, it checks if the ratio of values within that range which are
non-null is greater than <code class="docutils literal notranslate"><span class="pre">min_data_fraction</span></code>. If not, then the year will also be
dropped. This ensures that if there is a section of the year that is mostly complete,
even if the rest of the year is NULL, then it will still be included for imputation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ts</strong> – Timeseries matrix as described in <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries" title="pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlaggedTimeseries</span></code></a>.</p></li>
<li><p><strong>min_data</strong> – Minimum number of non-null hours in a year.</p></li>
<li><p><strong>min_data_fraction</strong> – Minimum fraction of non-null hours between the first and last
non-null hour in a year.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.flag_ruggles">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">flag_ruggles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeseries_matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><span class="pre">TimeseriesMatrix</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_data_fraction</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.9</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><span class="pre">TimeseriesMatrix</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><span class="pre">TimeseriesMatrix</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#flag_ruggles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.flag_ruggles" title="Link to this definition">¶</a></dt>
<dd><p>Flag values following the method of Ruggles and others (2020).</p>
<p>Assumes values are hourly electricity demand.</p>
<ul class="simple">
<li><p>description: <a class="reference external" href="https://doi.org/10.1038/s41597-020-0483-x">https://doi.org/10.1038/s41597-020-0483-x</a></p></li>
<li><p>code: <a class="reference external" href="https://github.com/truggles/EIA_Cleaned_Hourly_Electricity_Demand_Code">https://github.com/truggles/EIA_Cleaned_Hourly_Electricity_Demand_Code</a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ts</strong> – Aligned timeseries matrix for imputation.</p></li>
<li><p><strong>min_data</strong> – Minimum number of non-null hours in a year.</p></li>
<li><p><strong>min_data_fraction</strong> – Minimum fraction of non-null hours between the first and last</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Two <code class="docutils literal notranslate"><span class="pre">TimeseriesMatrix</span></code> dataframes with the same shape. The first contains
the input timeseries with flagged values Nulled out in preparation for
imputation. The second contains the actual flags for reference.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.summarize_flags">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">summarize_flags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imputed_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v3.0.1)"><span class="pre">pandas.DataFrame</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v3.0.1)"><span class="pre">pandas.DataFrame</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#summarize_flags"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.summarize_flags" title="Link to this definition">¶</a></dt>
<dd><p>Summarize flagged values by flag, count and median.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>imputed_df</strong> – DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.simulate_nulls">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">simulate_nulls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">lengths</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" title="(in Python v3.14)"><span class="pre">collections.abc.Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">padding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intersect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#simulate_nulls"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.simulate_nulls" title="Link to this definition">¶</a></dt>
<dd><p>Find non-null values to null to match a run-length distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – Timeseries matrix as described in <code class="xref py py-func docutils literal notranslate"><span class="pre">_prepare_timeseries_matrix()</span></code>
defined within <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute_timeseries_asset_factory" title="pudl.analysis.timeseries_cleaning.impute_timeseries_asset_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">impute_timeseries_asset_factory()</span></code></a>.</p></li>
<li><p><strong>length</strong> – Length of null runs to simulate for each series.
By default, uses the run lengths of null values in each series.</p></li>
<li><p><strong>padding</strong> – Minimum number of non-null values between simulated null runs
and between simulated and existing null runs.</p></li>
<li><p><strong>intersect</strong> – Whether simulated null runs can intersect each other.</p></li>
<li><p><strong>overlap</strong> – Whether simulated null runs can overlap existing null runs. If
<code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">padding</span></code> is ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Boolean mask of current non-null values to set to null.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – Could not find space for run of length {length}.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">simulate_nulls</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="go">array([ True, False, False, False, True, True, False, False, False])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">simulate_nulls</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">lengths</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">padding</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="go">array([False, False, False, True, True, True, True, False, False])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.fold_tensor">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">fold_tensor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">periods</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">24</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#fold_tensor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.fold_tensor" title="Link to this definition">¶</a></dt>
<dd><p>Fold into a 3-dimensional tensor representation.</p>
<p>Folds the series <cite>x</cite> (number of observations, number of series)
into a 3-d tensor (number of series, number of groups, number of periods),
splitting observations into groups of length <cite>periods</cite>.
For example, each group may represent a day and each period the hour of the day.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – Series array to fold. Uses <code class="xref py py-attr docutils literal notranslate"><span class="pre">x</span></code> by default.</p></li>
<li><p><strong>periods</strong> – Number of consecutive values in each series to fold into a group.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tensor</span> <span class="o">=</span> <span class="n">fold_tensor</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tensor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">array([[1, 2, 3],</span>
<span class="go">       [4, 5, 6]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">unfold_tensor</span><span class="p">(</span><span class="n">tensor</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
<span class="go">np.True_</span>
</pre></div>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.unfold_tensor">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">unfold_tensor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tensor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#unfold_tensor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.unfold_tensor" title="Link to this definition">¶</a></dt>
<dd><p>Unfold a 3-dimensional tensor representation.</p>
<p>Performs the reverse of <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.fold_tensor" title="pudl.analysis.timeseries_cleaning.fold_tensor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fold_tensor()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.impute">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">impute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><span class="pre">TimeseriesMatrix</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">periods</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">24</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'tubal'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><span class="pre">TimeseriesMatrix</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#impute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.impute" title="Link to this definition">¶</a></dt>
<dd><p>Impute null values.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The imputation method requires that nulls be replaced by zeros,
so the series cannot already contain zeros.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask</strong> – Boolean mask of values to impute in addition to
any null values in <code class="xref py py-attr docutils literal notranslate"><span class="pre">x</span></code>.</p></li>
<li><p><strong>periods</strong> – Number of consecutive values in each series to fold into a group.
See <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.fold_tensor" title="pudl.analysis.timeseries_cleaning.fold_tensor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fold_tensor()</span></code></a>. Default of 24 is meant for hourly data with a
diurnal periodicity.</p></li>
<li><p><strong>blocks</strong> – Number of blocks into which to split the series for imputation.
This has been found to reduce processing time for <cite>method=’tnn’</cite>.</p></li>
<li><p><strong>method</strong> – Imputation method to use
(‘tubal’: <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute_latc_tubal" title="pudl.analysis.timeseries_cleaning.impute_latc_tubal"><code class="xref py py-func docutils literal notranslate"><span class="pre">impute_latc_tubal()</span></code></a>, ‘tnn’: <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute_latc_tnn" title="pudl.analysis.timeseries_cleaning.impute_latc_tnn"><code class="xref py py-func docutils literal notranslate"><span class="pre">impute_latc_tnn()</span></code></a>).</p></li>
<li><p><strong>kwargs</strong> – Optional arguments to <cite>method</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Array of same shape as <code class="xref py py-attr docutils literal notranslate"><span class="pre">x</span></code> with all null values
(and those selected by <cite>mask</cite>) replaced with imputed values.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – Zero values present. Replace with very small value.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.summarize_imputed">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">summarize_imputed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><span class="pre">TimeseriesMatrix</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputed_matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><span class="pre">TimeseriesMatrix</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.4)"><span class="pre">numpy.ndarray</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v3.0.1)"><span class="pre">pandas.DataFrame</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#summarize_imputed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.summarize_imputed" title="Link to this definition">¶</a></dt>
<dd><p>Summarize the fit of imputed values to actual values.</p>
<p>Summarizes the agreement between actual and imputed values with the
following statistics:</p>
<ul class="simple">
<li><p><cite>mpe</cite>: Mean percent error, <cite>(actual - imputed) / actual</cite>.</p></li>
<li><p><cite>mape</cite>: Mean absolute percent error, <cite>abs(mpe)</cite>.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imputed</strong> – Series of same shape as <code class="xref py py-attr docutils literal notranslate"><span class="pre">x</span></code> with imputed values.
See <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute" title="pudl.analysis.timeseries_cleaning.impute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">impute()</span></code></a>.</p></li>
<li><p><strong>mask</strong> – Boolean mask of imputed values that were not null in <code class="xref py py-attr docutils literal notranslate"><span class="pre">x</span></code>.
See <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.simulate_nulls" title="pudl.analysis.timeseries_cleaning.simulate_nulls"><code class="xref py py-meth docutils literal notranslate"><span class="pre">simulate_nulls()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Table of imputed value statistics for each series.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.impute_flagged_values">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">impute_flagged_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><span class="pre">TimeseriesMatrix</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">years</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'tubal'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'tnn'</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">periods</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">24</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><span class="pre">TimeseriesMatrix</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#impute_flagged_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.impute_flagged_values" title="Link to this definition">¶</a></dt>
<dd><p>Impute null values in input timeseries matrix.</p>
<p>Imputation is performed separately for each year, with only the respondents
reporting data in that year.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The imputation is parallelized internally, and by default will use all available
CPU cores. If you want to limit the number of cores used, you can set the
<code class="docutils literal notranslate"><span class="pre">OMP_NUM_THREADS</span></code> environment variable to the desired number of threads.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> – Timeseries matrix as described in <code class="xref py py-func docutils literal notranslate"><span class="pre">_prepare_timeseries_matrix()</span></code>
defined within <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute_timeseries_asset_factory" title="pudl.analysis.timeseries_cleaning.impute_timeseries_asset_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">impute_timeseries_asset_factory()</span></code></a>.</p></li>
<li><p><strong>years</strong> – list of years to input</p></li>
<li><p><strong>periods</strong> – Number of consecutive values in each series to fold into a group. See
<a class="reference internal" href="#pudl.analysis.timeseries_cleaning.fold_tensor" title="pudl.analysis.timeseries_cleaning.fold_tensor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fold_tensor()</span></code></a>.</p></li>
<li><p><strong>blocks</strong> – Number of blocks into which to split the series for imputation.
This has been found to reduce processing time for the tnn method.</p></li>
<li><p><strong>method</strong> – Maps each year to the appropriate imputation method. “tubal” uses
<a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute_latc_tubal" title="pudl.analysis.timeseries_cleaning.impute_latc_tubal"><code class="xref py py-func docutils literal notranslate"><span class="pre">impute_latc_tubal()</span></code></a> and  “tnn” uses <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute_latc_tnn" title="pudl.analysis.timeseries_cleaning.impute_latc_tnn"><code class="xref py py-func docutils literal notranslate"><span class="pre">impute_latc_tnn()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Copy of <code class="docutils literal notranslate"><span class="pre">df</span></code> with imputed values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.SimulateFlagsSettings">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">SimulateFlagsSettings</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#SimulateFlagsSettings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.SimulateFlagsSettings" title="Link to this definition">¶</a></dt>
<dd><p>Define settings used to simulate flagged values for scoring imputation.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.SimulateFlagsSettings.num_months">
<span class="sig-name descname"><span class="pre">num_months</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">30</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#SimulateFlagsSettings.num_months"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.SimulateFlagsSettings.num_months" title="Link to this definition">¶</a></dt>
<dd><p>The number of months of data to simulate.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.SimulateFlagsSettings.min_flag_rate">
<span class="sig-name descname"><span class="pre">min_flag_rate</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.1</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#SimulateFlagsSettings.min_flag_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.SimulateFlagsSettings.min_flag_rate" title="Link to this definition">¶</a></dt>
<dd><p>Min ratio of bad points in a section of data to be used for reference.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.SimulateFlagsSettings.max_flag_rate">
<span class="sig-name descname"><span class="pre">max_flag_rate</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.5</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#SimulateFlagsSettings.max_flag_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.SimulateFlagsSettings.max_flag_rate" title="Link to this definition">¶</a></dt>
<dd><p>Max ratio of bad points in a section of data to be used for reference.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.SimulateFlagsSettings.output_io_manager_key">
<span class="sig-name descname"><span class="pre">output_io_manager_key</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'io_manager'</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#SimulateFlagsSettings.output_io_manager_key"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.SimulateFlagsSettings.output_io_manager_key" title="Link to this definition">¶</a></dt>
<dd><p>Specify io-manager for final simulated asset.</p>
<p>In some cases we use the parquet IO-manager so we can build notebooks/visualizations
on simulated data.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.SimulateFlagsSettings.mape_threshold">
<span class="sig-name descname"><span class="pre">mape_threshold</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.05</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#SimulateFlagsSettings.mape_threshold"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.SimulateFlagsSettings.mape_threshold" title="Link to this definition">¶</a></dt>
<dd><p>Maximum allowable mean absolute percent error computed on simulated values. Will be checked in an asset check.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.SimulationDataFrame">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">SimulationDataFrame</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#SimulationDataFrame"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.SimulationDataFrame" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-obj docutils literal notranslate"><span class="pre">pandera.pandas.DataFrameModel</span></code></p>
<p>Collection of months of data which will be used to simulate flagged values.</p>
<p>Each row in this dataframe identifies a pairing of two entity IDs and two months
that can be used to evaluate the performance of the imputation. The “reference”
is a month in which a high proportion of reported values were flagged for
imputation, and the “simulation” is a month in which there were no values flagged
for imputation. The pattern of flagged (null) values in the reference month will be
used to mask the reported values found in the simulation month so they can be
imputed, and then the imputed values will be compared to the originally reported
data to evaluate the imputation’s performance.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.SimulationDataFrame.reference_id_col">
<span class="sig-name descname"><span class="pre">reference_id_col</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.Series.html#pandera.typing.Series" title="(in pandera)"><span class="pre">pandera.typing.Series</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#SimulationDataFrame.reference_id_col"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.SimulationDataFrame.reference_id_col" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.SimulationDataFrame.reference_month">
<span class="sig-name descname"><span class="pre">reference_month</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.Series.html#pandera.typing.Series" title="(in pandera)"><span class="pre">pandera.typing.Series</span></a><span class="p"><span class="pre">[</span></span><span class="pre">pandera.pandas.dtypes.DateTime</span><span class="p"><span class="pre">]</span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#SimulationDataFrame.reference_month"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.SimulationDataFrame.reference_month" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.SimulationDataFrame.simulation_id_col">
<span class="sig-name descname"><span class="pre">simulation_id_col</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.Series.html#pandera.typing.Series" title="(in pandera)"><span class="pre">pandera.typing.Series</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#SimulationDataFrame.simulation_id_col"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.SimulationDataFrame.simulation_id_col" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.SimulationDataFrame.simulation_month">
<span class="sig-name descname"><span class="pre">simulation_month</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.Series.html#pandera.typing.Series" title="(in pandera)"><span class="pre">pandera.typing.Series</span></a><span class="p"><span class="pre">[</span></span><span class="pre">pandera.pandas.dtypes.DateTime</span><span class="p"><span class="pre">]</span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#SimulationDataFrame.simulation_month"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.SimulationDataFrame.simulation_month" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning._merge_imputed">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">_merge_imputed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aligned_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame" title="pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame"><span class="pre">AlignedTimeseriesDataFrame</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><span class="pre">TimeseriesMatrix</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flags</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><span class="pre">TimeseriesMatrix</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v3.0.1)"><span class="pre">pandas.DataFrame</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#_merge_imputed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning._merge_imputed" title="Link to this definition">¶</a></dt>
<dd><p>Helper function to melt imputed timeseries matrix and merge back on input asset.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning._add_simulated_flag_col">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">_add_simulated_flag_col</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imputed_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame" title="pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame"><span class="pre">AlignedTimeseriesDataFrame</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">simulation_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.SimulationDataFrame" title="pudl.analysis.timeseries_cleaning.SimulationDataFrame"><span class="pre">SimulationDataFrame</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame" title="pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame"><span class="pre">AlignedTimeseriesDataFrame</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#_add_simulated_flag_col"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning._add_simulated_flag_col" title="Link to this definition">¶</a></dt>
<dd><p>Return a modified <code class="docutils literal notranslate"><span class="pre">imputed_df</span></code> with a column indicating which rows should be flagged for simulation.</p>
<p>This will find all flagged values from a reference month and apply the flag
pattern to a simulation month. The flag pattern is determined by calculating the
hour of the month for each flagged (how many hours is this after the start of the
month), and flagging the corresponding hour in the simulation month. Reference
months are chosen by finding months with a relatively high rate of imputation,
while simulation months have no values which were flagged for imputation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imputed_df</strong> – Production DataFrame with imputed values, which is used to find
sections with high rates of imputation.</p></li>
<li><p><strong>simulation_df</strong> – DataFrame with reference and simulation months.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame which contains all ID/datetime pairs that should be flagged for
simulated imputation.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.get_simulated_flag_mask">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">get_simulated_flag_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">settings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.SimulateFlagsSettings" title="pudl.analysis.timeseries_cleaning.SimulateFlagsSettings"><span class="pre">SimulateFlagsSettings</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputed_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame" title="pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame"><span class="pre">AlignedTimeseriesDataFrame</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">simulation_group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.14)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://pandera.readthedocs.io/en/stable/reference/generated/pandera.typing.DataFrame.html#pandera.typing.DataFrame" title="(in pandera)"><span class="pre">pandera.typing.DataFrame</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix" title="pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><span class="pre">TimeseriesMatrix</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#set" title="(in Python v3.14)"><span class="pre">set</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#get_simulated_flag_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.get_simulated_flag_mask" title="Link to this definition">¶</a></dt>
<dd><p>Return a flag mask to flag values for simulated imputation.</p>
<p>Find months of data with high rate of flagged values, and use these sections as a
reference to flag values in otherwise good sections of data. This allows us to
impute data in a realistic scenario where we have good reported data, which we can
compare to in order to compute quantitative metrics to validate the quality of our
imputation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>settings</strong> – Settings object, which contains all configurable settings for
simulation.</p></li>
<li><p><strong>imputed_df</strong> – Production DataFrame with imputed values, which is used to find
sections with high rates of imputation.</p></li>
<li><p><strong>simulation_group</strong> – Allows testing imputation performance on different groups of
data like BA/subregion demand, which can be combined into a single
imputation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple of <code class="docutils literal notranslate"><span class="pre">timeseries_matrix</span></code>, and <code class="docutils literal notranslate"><span class="pre">flag_matrix</span></code> modified with simulation
data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">ImputeTimeseriesSettings</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#ImputeTimeseriesSettings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings" title="Link to this definition">¶</a></dt>
<dd><p>Define settings used for timeseries imputation.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.min_data_fraction">
<span class="sig-name descname"><span class="pre">min_data_fraction</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><span class="pre">float</span></a></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.7</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#ImputeTimeseriesSettings.min_data_fraction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.min_data_fraction" title="Link to this definition">¶</a></dt>
<dd><p>Fraction of values in a year which must be non-null to do imputation on year.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.min_data">
<span class="sig-name descname"><span class="pre">min_data</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">100</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#ImputeTimeseriesSettings.min_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.min_data" title="Link to this definition">¶</a></dt>
<dd><p>Minimum number of values which must be non-null to do imputation on year.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.periods">
<span class="sig-name descname"><span class="pre">periods</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">24</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#ImputeTimeseriesSettings.periods"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.periods" title="Link to this definition">¶</a></dt>
<dd><p>Number of consecutive values in each series to fold into a group.</p>
<p>See <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.fold_tensor" title="pudl.analysis.timeseries_cleaning.fold_tensor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fold_tensor()</span></code></a>. The default of 24 is meant for hourly data with a diurnal
periodicity.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.blocks">
<span class="sig-name descname"><span class="pre">blocks</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#ImputeTimeseriesSettings.blocks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.blocks" title="Link to this definition">¶</a></dt>
<dd><p>Split timeseries matrix into equal sized blocks before running imputation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.method">
<span class="sig-name descname"><span class="pre">method</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'tubal'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'tnn'</span></span><span class="p"><span class="pre">]</span></span></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'tubal'</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#ImputeTimeseriesSettings.method"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.method" title="Link to this definition">¶</a></dt>
<dd><p>Imputation method to use.</p>
<ul class="simple">
<li><p>tubal indicates <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute_latc_tubal" title="pudl.analysis.timeseries_cleaning.impute_latc_tubal"><code class="xref py py-func docutils literal notranslate"><span class="pre">impute_latc_tubal()</span></code></a></p></li>
<li><p>tnn indicates <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute_latc_tnn" title="pudl.analysis.timeseries_cleaning.impute_latc_tnn"><code class="xref py py-func docutils literal notranslate"><span class="pre">impute_latc_tnn()</span></code></a></p></li>
</ul>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.method_overrides">
<span class="sig-name descname"><span class="pre">method_overrides</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'tubal'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'tnn'</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#ImputeTimeseriesSettings.method_overrides"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.method_overrides" title="Link to this definition">¶</a></dt>
<dd><p>Override stated imputation method for specific years.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.simulate_flags_settings">
<span class="sig-name descname"><span class="pre">simulate_flags_settings</span></span><span class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.SimulateFlagsSettings" title="pudl.analysis.timeseries_cleaning.SimulateFlagsSettings"><span class="pre">SimulateFlagsSettings</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#ImputeTimeseriesSettings.simulate_flags_settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.simulate_flags_settings" title="Link to this definition">¶</a></dt>
<dd><p>Settings to simulate flagged values and score imputation.</p>
<p>Defaults to None which will not do any simulation/scoring.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pudl.analysis.timeseries_cleaning.impute_timeseries_asset_factory">
<span class="sig-prename descclassname"><span class="pre">pudl.analysis.timeseries_cleaning.</span></span><span class="sig-name descname"><span class="pre">impute_timeseries_asset_factory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_asset_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_asset_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">years_from_context</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable" title="(in Python v3.14)"><span class="pre">collections.abc.Callable</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'demand_mwh'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputed_value_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'demand_imputed_mwh'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reported_value_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'demand_reported_mwh'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">simulation_group_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_io_manager_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'parquet_io_manager'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">settings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings" title="pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings"><span class="pre">ImputeTimeseriesSettings</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">ImputeTimeseriesSettings()</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v3.0.1)"><span class="pre">pandas.DataFrame</span></a></span></span><a class="reference internal" href="../../../../_modules/pudl/analysis/timeseries_cleaning.html#impute_timeseries_asset_factory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pudl.analysis.timeseries_cleaning.impute_timeseries_asset_factory" title="Link to this definition">¶</a></dt>
<dd><p>Produces assets to impute values for a given timeseries table/column.</p>
<p>This factory function produces a set of assets which perform timeseries imputation
on one column in a specified table. This process is split into a series of assets
to reduce peak memory usage by offloading intermediate products onto disk. The
assets also correspond with the three steps that make up the the timeseries
imputation process:</p>
<ol class="arabic simple">
<li><p>Convert datetime UTC to local datetimes and pivot dataframe to timeseries matrix</p></li>
<li><p>Flag anomalous and missing values in timeseries</p></li>
<li><p>Perform imputation and melt back to expected output table structure</p></li>
</ol>
<p>This factory also has the ability to produce a set of simulation assets. These
assets mirror the production assets, but they will impute a selection of values
which were not actually flagged for imputation. This means we can impute data
where the reported data is actually deemed “good”, allowing us to compare the
imputed values to the reported. We then compute Mean Absolute Percentage Error
to score the imputation. We can produce these simulated assets during our nightly
builds for ongoing monitoring of the imputation, or just as one off way to validate
or compare imputation methods.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_asset_name</strong> – Name of upstream asset to perform imputation on.</p></li>
<li><p><strong>output_asset_name</strong> – Name of final output asset with imputed column.</p></li>
<li><p><strong>years_from_context</strong> – Function to generate the list of years on which to perform
imputation on.</p></li>
<li><p><strong>id_col</strong> – Name of column identifying entities to group timeseries by.</p></li>
<li><p><strong>value_col</strong> – Column imputation will be performed on.</p></li>
<li><p><strong>imputed_value_col</strong> – Name of column in output asset with imputed values.</p></li>
<li><p><strong>reported_value_col</strong> – Name of column in output asset with original reported
values.</p></li>
<li><p><strong>output_io_manager_key</strong> – IO-manager to use for final output asset.</p></li>
<li><p><strong>simulation_group_col</strong> – In cases where we are combining multiple datasets into
a single imputation run (like BA/subregion demand), this column is used
to compute simulation results for each set independently. This should
point to a categorical column which defines which group a row belongs to.</p></li>
<li><p><strong>settings</strong> – Configurable options for imputation
(see <a class="reference internal" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings" title="pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImputeTimeseriesSettings</span></code></a>).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../timeseries_evaluation/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">pudl.analysis.timeseries_evaluation</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../state_demand/index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">pudl.analysis.state_demand</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2016-2026, Catalyst Cooperative, CC-BY-4.0
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">pudl.analysis.timeseries_cleaning</a><ul>
<li><a class="reference internal" href="#attributes">Attributes</a></li>
<li><a class="reference internal" href="#classes">Classes</a></li>
<li><a class="reference internal" href="#functions">Functions</a></li>
<li><a class="reference internal" href="#module-contents">Module Contents</a><ul>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.logger"><code class="docutils literal notranslate"><span class="pre">logger</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.STANDARD_UTC_OFFSETS"><code class="docutils literal notranslate"><span class="pre">STANDARD_UTC_OFFSETS</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame"><code class="docutils literal notranslate"><span class="pre">UTCTimeseriesDataFrame</span></code></a><ul>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame.id_col"><code class="docutils literal notranslate"><span class="pre">UTCTimeseriesDataFrame.id_col</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame.datetime_utc"><code class="docutils literal notranslate"><span class="pre">UTCTimeseriesDataFrame.datetime_utc</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame.timezone"><code class="docutils literal notranslate"><span class="pre">UTCTimeseriesDataFrame.timezone</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.UTCTimeseriesDataFrame.value_col"><code class="docutils literal notranslate"><span class="pre">UTCTimeseriesDataFrame.value_col</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame"><code class="docutils literal notranslate"><span class="pre">AlignedTimeseriesDataFrame</span></code></a><ul>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame.id_col"><code class="docutils literal notranslate"><span class="pre">AlignedTimeseriesDataFrame.id_col</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame.datetime"><code class="docutils literal notranslate"><span class="pre">AlignedTimeseriesDataFrame.datetime</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame.value_col"><code class="docutils literal notranslate"><span class="pre">AlignedTimeseriesDataFrame.value_col</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.AlignedTimeseriesDataFrame.flags"><code class="docutils literal notranslate"><span class="pre">AlignedTimeseriesDataFrame.flags</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix"><code class="docutils literal notranslate"><span class="pre">TimeseriesMatrix</span></code></a><ul>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.TimeseriesMatrix.datetime"><code class="docutils literal notranslate"><span class="pre">TimeseriesMatrix.datetime</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning._shift_utc"><code class="docutils literal notranslate"><span class="pre">_shift_utc()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.utc_dataframe_to_aligned"><code class="docutils literal notranslate"><span class="pre">utc_dataframe_to_aligned()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.pivot_aligned_timeseries_dataframe"><code class="docutils literal notranslate"><span class="pre">pivot_aligned_timeseries_dataframe()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.melt_imputed_timeseries_matrix"><code class="docutils literal notranslate"><span class="pre">melt_imputed_timeseries_matrix()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries"><code class="docutils literal notranslate"><span class="pre">FlaggedTimeseries</span></code></a><ul>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.x"><code class="docutils literal notranslate"><span class="pre">FlaggedTimeseries.x</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.columns"><code class="docutils literal notranslate"><span class="pre">FlaggedTimeseries.columns</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.index"><code class="docutils literal notranslate"><span class="pre">FlaggedTimeseries.index</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.flags"><code class="docutils literal notranslate"><span class="pre">FlaggedTimeseries.flags</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.uuid"><code class="docutils literal notranslate"><span class="pre">FlaggedTimeseries.uuid</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.__hash__"><code class="docutils literal notranslate"><span class="pre">FlaggedTimeseries.__hash__()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.from_timeseries_matrix"><code class="docutils literal notranslate"><span class="pre">FlaggedTimeseries.from_timeseries_matrix()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.to_dataframes"><code class="docutils literal notranslate"><span class="pre">FlaggedTimeseries.to_dataframes()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.FlaggedTimeseries.flag"><code class="docutils literal notranslate"><span class="pre">FlaggedTimeseries.flag()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.slice_axis"><code class="docutils literal notranslate"><span class="pre">slice_axis()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.array_diff"><code class="docutils literal notranslate"><span class="pre">array_diff()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.encode_run_length"><code class="docutils literal notranslate"><span class="pre">encode_run_length()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.insert_run_length"><code class="docutils literal notranslate"><span class="pre">insert_run_length()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning._mat2ten"><code class="docutils literal notranslate"><span class="pre">_mat2ten()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning._ten2mat"><code class="docutils literal notranslate"><span class="pre">_ten2mat()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning._svt_tnn"><code class="docutils literal notranslate"><span class="pre">_svt_tnn()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute_latc_tnn"><code class="docutils literal notranslate"><span class="pre">impute_latc_tnn()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning._tsvt"><code class="docutils literal notranslate"><span class="pre">_tsvt()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute_latc_tubal"><code class="docutils literal notranslate"><span class="pre">impute_latc_tubal()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_null"><code class="docutils literal notranslate"><span class="pre">flag_null()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_negative_or_zero"><code class="docutils literal notranslate"><span class="pre">flag_negative_or_zero()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_identical_run"><code class="docutils literal notranslate"><span class="pre">flag_identical_run()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_global_outlier"><code class="docutils literal notranslate"><span class="pre">flag_global_outlier()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_global_outlier_neighbor"><code class="docutils literal notranslate"><span class="pre">flag_global_outlier_neighbor()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.rolling_median"><code class="docutils literal notranslate"><span class="pre">rolling_median()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.rolling_median_offset"><code class="docutils literal notranslate"><span class="pre">rolling_median_offset()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.median_of_rolling_median_offset"><code class="docutils literal notranslate"><span class="pre">median_of_rolling_median_offset()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.rolling_iqr_of_rolling_median_offset"><code class="docutils literal notranslate"><span class="pre">rolling_iqr_of_rolling_median_offset()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.median_prediction"><code class="docutils literal notranslate"><span class="pre">median_prediction()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_local_outlier"><code class="docutils literal notranslate"><span class="pre">flag_local_outlier()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.diff"><code class="docutils literal notranslate"><span class="pre">diff()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.rolling_iqr_of_diff"><code class="docutils literal notranslate"><span class="pre">rolling_iqr_of_diff()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_double_delta"><code class="docutils literal notranslate"><span class="pre">flag_double_delta()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.relative_median_prediction"><code class="docutils literal notranslate"><span class="pre">relative_median_prediction()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.iqr_of_diff_of_relative_median_prediction"><code class="docutils literal notranslate"><span class="pre">iqr_of_diff_of_relative_median_prediction()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning._find_single_delta"><code class="docutils literal notranslate"><span class="pre">_find_single_delta()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_single_delta"><code class="docutils literal notranslate"><span class="pre">flag_single_delta()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_anomalous_region"><code class="docutils literal notranslate"><span class="pre">flag_anomalous_region()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_bad_years"><code class="docutils literal notranslate"><span class="pre">flag_bad_years()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.flag_ruggles"><code class="docutils literal notranslate"><span class="pre">flag_ruggles()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.summarize_flags"><code class="docutils literal notranslate"><span class="pre">summarize_flags()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.simulate_nulls"><code class="docutils literal notranslate"><span class="pre">simulate_nulls()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.fold_tensor"><code class="docutils literal notranslate"><span class="pre">fold_tensor()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.unfold_tensor"><code class="docutils literal notranslate"><span class="pre">unfold_tensor()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute"><code class="docutils literal notranslate"><span class="pre">impute()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.summarize_imputed"><code class="docutils literal notranslate"><span class="pre">summarize_imputed()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute_flagged_values"><code class="docutils literal notranslate"><span class="pre">impute_flagged_values()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.SimulateFlagsSettings"><code class="docutils literal notranslate"><span class="pre">SimulateFlagsSettings</span></code></a><ul>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.SimulateFlagsSettings.num_months"><code class="docutils literal notranslate"><span class="pre">SimulateFlagsSettings.num_months</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.SimulateFlagsSettings.min_flag_rate"><code class="docutils literal notranslate"><span class="pre">SimulateFlagsSettings.min_flag_rate</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.SimulateFlagsSettings.max_flag_rate"><code class="docutils literal notranslate"><span class="pre">SimulateFlagsSettings.max_flag_rate</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.SimulateFlagsSettings.output_io_manager_key"><code class="docutils literal notranslate"><span class="pre">SimulateFlagsSettings.output_io_manager_key</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.SimulateFlagsSettings.mape_threshold"><code class="docutils literal notranslate"><span class="pre">SimulateFlagsSettings.mape_threshold</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.SimulationDataFrame"><code class="docutils literal notranslate"><span class="pre">SimulationDataFrame</span></code></a><ul>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.SimulationDataFrame.reference_id_col"><code class="docutils literal notranslate"><span class="pre">SimulationDataFrame.reference_id_col</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.SimulationDataFrame.reference_month"><code class="docutils literal notranslate"><span class="pre">SimulationDataFrame.reference_month</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.SimulationDataFrame.simulation_id_col"><code class="docutils literal notranslate"><span class="pre">SimulationDataFrame.simulation_id_col</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.SimulationDataFrame.simulation_month"><code class="docutils literal notranslate"><span class="pre">SimulationDataFrame.simulation_month</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning._merge_imputed"><code class="docutils literal notranslate"><span class="pre">_merge_imputed()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning._add_simulated_flag_col"><code class="docutils literal notranslate"><span class="pre">_add_simulated_flag_col()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.get_simulated_flag_mask"><code class="docutils literal notranslate"><span class="pre">get_simulated_flag_mask()</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings"><code class="docutils literal notranslate"><span class="pre">ImputeTimeseriesSettings</span></code></a><ul>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.min_data_fraction"><code class="docutils literal notranslate"><span class="pre">ImputeTimeseriesSettings.min_data_fraction</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.min_data"><code class="docutils literal notranslate"><span class="pre">ImputeTimeseriesSettings.min_data</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.periods"><code class="docutils literal notranslate"><span class="pre">ImputeTimeseriesSettings.periods</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.blocks"><code class="docutils literal notranslate"><span class="pre">ImputeTimeseriesSettings.blocks</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.method"><code class="docutils literal notranslate"><span class="pre">ImputeTimeseriesSettings.method</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.method_overrides"><code class="docutils literal notranslate"><span class="pre">ImputeTimeseriesSettings.method_overrides</span></code></a></li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.ImputeTimeseriesSettings.simulate_flags_settings"><code class="docutils literal notranslate"><span class="pre">ImputeTimeseriesSettings.simulate_flags_settings</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pudl.analysis.timeseries_cleaning.impute_timeseries_asset_factory"><code class="docutils literal notranslate"><span class="pre">impute_timeseries_asset_factory()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../../../_static/documentation_options.js?v=11fc87b4"></script>
    <script src="../../../../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../../../../_static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>